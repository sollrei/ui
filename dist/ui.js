"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var i=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,i?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define("ui",e):e()}(function(){var e;e=function(){function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}var t=setTimeout;function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,s._immediateFn(function(){var e,t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void o(i.promise,e)}r(i.promise,e)}else(1===n._state?r:o)(i.promise,n._value)})):n._deferreds.push(i)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===_typeof(e)||"function"==typeof e)){var n=e.then;if(e instanceof s)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void u((i=n,a=e,function(){i.apply(a,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){o(t,e)}var i,a}function o(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,o(t,e))})}catch(e){if(n)return;n=!0,o(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new c(e,t,n)),n},s.prototype.finally=e,s.all=function(t){return new s(function(a,s){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return a([]);var o=r.length;for(var e=0;e<r.length;e++)!function t(n,e){try{if(e&&("object"===_typeof(e)||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){t(n,e)},s)}r[n]=e,0==--o&&a(r)}catch(e){s(e)}}(e,r[e])})},s.resolve=function(t){return t&&"object"===_typeof(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(n){return new s(function(e,t){t(n)})},s.race=function(a){return new s(function(e,t){for(var n=0,i=a.length;n<i;n++)a[n].then(e,t)})},s._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();n.Promise?n.Promise.prototype.finally||(n.Promise.prototype.finally=e):n.Promise=s},("object"!==("undefined"==typeof exports?"undefined":_typeof(exports))||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define(e):e();var t,n,i="URLSearchParams"in self,a="Symbol"in self&&"iterator"in Symbol,o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in self,r="ArrayBuffer"in self;function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function p(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(o&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(s&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(r&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t)))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!r||!ArrayBuffer.prototype.isPrototypeOf(e)&&!n(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";var t;this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,i=d(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}r&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),h.prototype.append=function(e,t){e=l(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[l(e)]},h.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},h.prototype.set=function(e,t){this.map[l(e)]=c(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),u(n)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},h.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),u(n)},a&&(h.prototype[Symbol.iterator]=h.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,i,a=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),-1<g.indexOf(i)?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function b(e){var a=new FormData;return e.trim().split("&").forEach(function(e){var t,n,i;e&&(n=(t=e.split("=")).shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," "),a.append(decodeURIComponent(n),decodeURIComponent(i)))}),a}function C(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];C.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})};var w,S,E=self.DOMException;try{new E}catch(e){(E=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),E.prototype.constructor=E}function x(a,r){return new Promise(function(i,e){var t=new y(a,r);if(t.signal&&t.signal.aborted)return e(new E("Aborted","AbortError"));var s=new XMLHttpRequest;function n(){s.abort()}s.onload=function(){var e,a,t={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",a=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t,n=e.split(":"),i=n.shift().trim();i&&(t=n.join(":").trim(),a.append(i,t))}),a)};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var n="response"in s?s.response:s.responseText;i(new C(n,t))},s.onerror=function(){e(new TypeError("Network request failed"))},s.ontimeout=function(){e(new TypeError("Network request failed"))},s.onabort=function(){e(new E("Aborted","AbortError"))},s.open(t.method,t.url,!0),"include"===t.credentials?s.withCredentials=!0:"omit"===t.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),t.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",n),s.onreadystatechange=function(){4===s.readyState&&t.signal.removeEventListener("abort",n)}),s.send(void 0===t._bodyInit?null:t._bodyInit)})}function T(e){return"function"==typeof e||"[object Function]"===w.call(e)}function _(e){var t,n=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(n,0),S)}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=h,self.Request=y,self.Response=C),Array.from||(Array.from=(w=Object.prototype.toString,S=Math.pow(2,53)-1,function(e,t,n){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,s=1<arguments.length?t:void 0;if(void 0!==s){if(!T(s))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(a=n)}for(var r,o=_(i.length),l=T(this)?Object(new this(o)):new Array(o),c=0;c<o;)r=i[c],l[c]=s?void 0===a?s(r,c):s.call(a,r,c):r,c+=1;return l.length=o,l})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;if(!Element.prototype.matches)return t.parentNode;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i+=1){var a=arguments[i];if(null!=a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])}return n},writable:!0,configurable:!0}),HTMLElement.prototype.trigger=function(e,t){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!0),n.data=t||{},n.eventName=e,this.dispatchEvent(n),this},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)};try{new window.CustomEvent("T")}catch(e){var A=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};A.prototype=window.Event.prototype,window.CustomEvent=A}var L,O={IEVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE");return 0<t||e.match(/Trident.*rv:11\./)?parseInt(e.substring(t+5,e.indexOf(".",t)),10):999},forEach:function(e,t){[].slice.call(e).forEach(t)},isEmpty:function(e){return null==e||"object"===_typeof(e)&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length},getUrlParameter:function(e){if("function"==typeof window.URLSearchParams)return new URLSearchParams(window.location.search).get(e);var t=e.replace(/[\[\]]/g,"\\$&"),n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(decodeURIComponent(location.href));return n?n[2]?n[2]:"":null},hasClass:function(t,e){return!!t&&(!!t.className&&(t.classList?e.match(/(\w|-)+/g).every(function(e){return t.classList.contains(e)}):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))))},addClass:function(t,e){var n;t&&e&&((n=t).classList?e.match(/(\w|-)+/g).forEach(function(e){t.classList.add(e)}):this.hasClass(t,e)||(n.className=t.className?t.className.trim()+" "+e:e))},removeClass:function(t,e){var n;t&&e&&((n=t).classList?e.match(/(\w|-)+/g).forEach(function(e){t.classList.remove(e)}):n.className=n.className.replace(new RegExp("(\\s|^)".concat(e,"(\\s|$)"))," "))},toggleClass:function(t,e){t&&e&&(t.classList?e.match(/(\w|-)+/g).forEach(function(e){t.classList.toggle(e)}):this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e))},addMultiEvent:function(e,t,n){for(var i=t.split(" "),a=0,s=i.length;a<s;a+=1)e.addEventListener(i[a],n,!1)},on:function(n,e,i,a){this.addMultiEvent(n,e,function(e){for(var t=e.target;t&&t!==n;t=t.parentNode)if(t.matches(i)){a.call(t,e);break}})},createElement:function(e,t,n){var i=1<arguments.length&&void 0!==t?t:{},a=2<arguments.length&&void 0!==n?n:"",s=document.createElement(e);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r]);try{s.innerHTML=a}catch(e){throw new Error(e)}return s},createId:function(){return Number(Math.random().toString().substr(3,3)+Date.now()).toString(36)},supportPseudo:function(e){var t,n=e,i=document.styleSheets[0];i||(t=document.createElement("style"),document.head.appendChild(t),i=document.styleSheets[0],document.head.removeChild(t));return function(){try{return/^:/.test(e)||(n=":"+e),i.insertRule("html"+n+"{}",0),i.deleteRule(0),!0}catch(e){return!1}}()},dateFormate:function(e,t){var n,i=new Date(e),a=i.getFullYear()+"",s=("0"+(i.getMonth()+1)).slice(-2),r=("0"+i.getDate()).slice(-2),o=("0"+i.getHours()).slice(-2),l=("0"+i.getMinutes()).slice(-2),c=("0"+i.getSeconds()).slice(-2),u={YY:a,MM:s,DD:r,hh:o,mm:l,ss:c};return t?(n=t,Object.keys(u).forEach(function(e){n=n.replace(e,u[e])})):n="".concat(a,"-").concat(s,"-").concat(r," ").concat(o,":").concat(l,":").concat(c),n},getPageScrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},getPageScrollLeft:function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},fetchData:function(e,t,n,i){var a,s=1<arguments.length&&void 0!==t?t:{},r=2<arguments.length&&void 0!==n?n:"GET",o=3<arguments.length&&void 0!==i?i:{Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},l=[];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push("".concat(c,"=").concat(encodeURIComponent(s[c])));if(a=l.join("&"),"POST"===r)return fetch(e,{method:r,headers:o,body:a}).then(function(e){if(e.status)return e.json();throw new Error("post data fetch error!")});var u=e;return a&&(u=0<e.indexOf("?")?"".concat(e,"&").concat(a):"".concat(e,"?").concat(a)),fetch(u,{}).then(function(e){if(e.status)return e.json();throw new Error("get data fetch error!")})}},N=function(){function n(e,t){_classCallCheck(this,n);this.settings=Object.assign({},{groupClass:"tree-group",checkAllClass:"check-all",nodeClass:"tree-node",labelClass:"node-label"},t),this.init(e)}return _createClass(n,[{key:"init",value:function(e){var t=e;"string"==typeof e&&(t=document.querySelector(e)),t&&(this.element=t,this.cache={},this.data=[],this.value=[],this.data=this.getDataFromDom(t.children),this.createDataCache(this.data),this.events())}},{key:"getDataFromDom",value:function(e){var i=this,t=this.settings,a=t.groupClass,s=t.nodeClass,n=t.labelClass,r=e;"object"!==_typeof(r)||r.length||(r=[e]);var o=[].slice.call(r);if(O.hasClass(o[0],n)){var l=o[0].querySelector("input"),c=l.value;return{label:l.parentNode.innerText||"",value:c||O.createId(),checkbox:l,children:this.getDataFromDom(o.splice(1))}}return o.map(function(e){if(O.hasClass(e,a))return i.getDataFromDom(e.children);if(O.hasClass(e,s)){var t=e.querySelector("input"),n=t.value;return{label:t.parentNode.innerText||"",value:n,checkbox:t}}return null})}},{key:"createDataCache",value:function(e,s){var r=this;e.forEach(function(e){var t=e.checkbox,n=e.value,i=e.children,a={label:e.label,value:n,checkbox:t};s&&(a.parent=s),i&&(a.children=i.map(function(e){return e.value}),r.createDataCache(i,n)),r.cache[n]=a})}},{key:"dealCheck",value:function(e){this.dealCheckChild(e),this.dealCheckParent(e)}},{key:"dealCheckChild",value:function(e){var i=this,a=e.checkbox.checked,s=this.cache;e.children&&e.children.forEach(function(e){var t=s[e],n=t.checkbox;a&&(n.indeterminate=!1),n.checked===a||n.disabled||(n.checked=a,i.dealCheckChild(t))})}},{key:"dealCheckParent",value:function(e){var t,n,i,a,s,r,o,l,c,u=this.cache;e.parent&&(n=(t=u[e.parent]).children,a=(i=t.checkbox).checked,s=i.indeterminate,o=!(r=!0),n.forEach(function(e){var t=u[e];t.checkbox.checked?o=!0:r=!!t.checkbox.indeterminate&&!(o=!0)}),l=!r&&o,c=r&&!l,i.indeterminate=l,a===(i.checked=c)&&s===l||this.dealCheckParent(t))}},{key:"changeValue",value:function(){var r=this,o=this.cache;this.value=[],Object.keys(o).forEach(function(e){var t=o[e],n=t.label,i=t.value,a=t.checkbox,s=t.children;a.checked&&!s&&r.value.push({label:n,value:i})})}},{key:"events",value:function(){var n=this.element,i=this;O.on(n,"change","input",function(){var e=this.value,t=i.cache[e];i.dealCheck(t),i.changeValue(),n.trigger("tree-change")})}}]),n}(),j=function(){function i(e,t,n){_classCallCheck(this,i);this.settings=Object.assign({},{},t),L=n,this.init(e)}return _createClass(i,[{key:"init",value:function(e){var t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t&&t instanceof HTMLElement))throw new Error("need element");this.element=t,this.targetList=t.querySelector(".select-list"),this.treeList=t.querySelector(".ui-tree"),this.value=[],this.createTeeCheck()}},{key:"createTeeCheck",value:function(){var e=this.element.querySelector(".ui-tree");this.tree=new N(e),this.value=[],this.events()}},{key:"changeValue",value:function(e){var t=this.value,n=[],a=[];if(!t.length)return this.value=e,void this.changeSelectedList();var s=[];e.forEach(function(n){var i=!1;t.forEach(function(e,t){i||n.value===e.value&&(i=!0,s.push(t))}),i||a.push(n)}),t.forEach(function(e,t){-1<s.indexOf(t)&&n.push(e)}),this.value=n.concat(a),this.changeSelectedList()}},{key:"changeSelectedList",value:function(){var e=this.targetList,t=this.value.reduce(function(e,t){return e+'<div class="transfer-item" data-value="'.concat(t.value,'"><span class="name">').concat(t.label,'</span><span class="delete iconfont icon-times"></span></div>')},"");e.innerHTML=t}},{key:"removeSelectedItem",value:function(e){var t=e.closest(".transfer-item").getAttribute("data-value"),n=this.treeList.querySelector('input[value="'.concat(t,'"]'));n.checked=!1,n.trigger("change")}},{key:"changeSort",value:function(e,t){var n=this.value;n.splice(t,0,n.splice(e,1)[0])}},{key:"destroy",value:function(){this.element=null,this.targetList=null,this.treeList=null,this.tree=null}},{key:"events",value:function(){var i=this,e=this.tree,t=this.element,n=this.targetList;new L(n,{onSort:function(e){var t=e.oldIndex,n=e.newIndex;i.changeSort(t,n)}}),O.on(t,"tree-change",".ui-tree",function(){i.changeValue(e.value)}),O.on(t,"click",".icon-times",function(){i.removeSelectedItem(this)})}}]),i}(),P=function(){function i(e,t){_classCallCheck(this,i);var n=e;"string"==typeof e&&(n=document.querySelector(e)),n&&(this.settings=Object.assign({},{thumbClass:".thumb",rateClass:".rate",delay:30,width:180,withInput:!1,inputWidth:80,inputUnit:"%",onChange:null},t),this.container=n,this.input=n.querySelector("input"),this.moving=this.moving.bind(this),this.init())}return _createClass(i,[{key:"init",value:function(){var e=this.input,t=e.value,n=e.getAttribute("max"),i=e.getAttribute("min");e.style.display="none",this.min=Number(i),this.max=Number(n),this.value=Number(t),this.range=this.max-this.min,this.zero=0,this.startDrag=!1,this.timer=null,i<0&&(this.zero=0-this.min),this.initDom(),this.initRate(this.value)}},{key:"initDom",value:function(){var e,t,n=this.createSlider(),i=this.container.appendChild(n),a=this.settings,s=a.thumbClass,r=a.rateClass,o=a.withInput;this.rangeSlider=i,this.elementThumb=i.querySelector(s),this.elementRate=i.querySelector(r),o&&(e=this.createInput(),t=this.container.parentNode.appendChild(e),this.valueInput=t.querySelector(".js-range-value")),this.events()}},{key:"createSlider",value:function(){var e=document.createElement("div");return e.className="ui-slider",e.innerHTML=this.createDomStr(),e}},{key:"createInput",value:function(){var e=this.settings,t=e.inputWidth,n=e.inputUnit,i=this.value,a=document.createElement("div");return a.className="ui-icon-input ml-20",a.style.width=t+"px",a.innerHTML='<input class="ui-form-control js-range-value" type="text" value="'.concat(i,'"/>\n    <span class="suffix">').concat(n,"</span>"),a}},{key:"createDomStr",value:function(){var e=this.zero/this.range*100,t=this.settings.width*e/100;return'<div class="bar">'+'<div class="negative" style="width: '.concat(e,'%"></div>')+'<div class="rate">'+'<div class="negative-rate" style="max-width: '.concat(t,'px"></div>')+'<div class="btn thumb"></div></div></div>'}},{key:"initRate",value:function(e){var t=this.elementRate,n=this.range,i=this.min;t.style.width=(e-i)/n*100+"%"}},{key:"setPosition",value:function(e){var t=this.settings,n=this.range,i=this.min,a=Math.round(e/t.width*n),s=a/n*100;this.changeBtnPosition(s,a+i)}},{key:"setValue",value:function(e){var t=this.settings,n=t.onChange,i=t.withInput;this.value=e,n&&"function"==typeof n&&n(e),i&&(this.valueInput.value=e)}},{key:"changeValue",value:function(e){var t,n=this.max,i=this.min,a=this.range,s=Number(e)||0;n<s&&(s=n),s<i&&(s=i),t=s/a*100,this.changeBtnPosition(t,s)}},{key:"changeBtnPosition",value:function(e,t){var n=this;this.elementRate.style.width=e+"%",clearTimeout(this.timer),this.timer=setTimeout(function(){n.setValue(t)},this.settings.delay)}},{key:"startMove",value:function(e){e.preventDefault(),this.startDrag=!0}},{key:"stopMove",value:function(){this.setStopStatus(),this.startDrag=!1}},{key:"moving",value:function(e){var t,n;this.startDrag&&((t=this.settings.width)<(n=e.clientX-this.rangeSlider.getBoundingClientRect().left)&&(n=t),n<0&&(n=0),this.setPosition(n))}},{key:"setStopStatus",value:function(){this.input.value=this.value}},{key:"events",value:function(){var t=this,e=this.elementThumb,n=this.container,i=this.settings,a=this.valueInput,s=document,r=this;e.addEventListener("mousedown",function(e){t.startMove(e)}),s.addEventListener("mouseup",function(){t.stopMove()}),n.addEventListener("click",function(e){t.startMove(e),t.moving(e),t.setStopStatus(),t.stopMove()}),s.addEventListener("mousemove",this.moving),i.withInput&&(a.addEventListener("change",function(){r.changeValue(this.value)}),a.addEventListener("keydown",function(e){13===e.keyCode&&(e.preventDefault(),r.changeValue(this.value))}))}}],[{key:"simpleRange",value:function(e,t,n){function i(e,t,n){var i=e,a=Number(e.getAttribute("max")),s=Number(e.getAttribute("min")),r=(Number(e.value)-s)/(a-s)*100;i.style.background="linear-gradient(to right, ".concat(t," 0%, ").concat(t," ").concat(r,"%, ").concat(n," ").concat(r,"%, ").concat(n," 100%)")}var a,s=1<arguments.length&&void 0!==t?t:"#577bf9",r=2<arguments.length&&void 0!==n?n:"#edf1f4";window.ActiveXObject||"ActiveXObject"in window||("string"==typeof(a=e)&&(a=document.querySelectorAll(e)),a.length&&[].slice.call(a).forEach(function(e){e.addEventListener("input",function(){i(this,s,r)}),i(e,s,r)}))}}]),i}(),q=function(){function n(e,t){_classCallCheck(this,n);this.settings=Object.assign({},{min:0,max:0,width:480,decimal:0,section:[],onSelect:null,onChange:null},t),this.moving=this.moving.bind(this),this.init(e)}return _createClass(n,[{key:"init",value:function(e){var t=e;"string"==typeof t&&(t=document.querySelector(e)),t&&(this.wrap=t,this.startDrag=!1,this.createDom(),this.events())}},{key:"createDom",value:function(){var e=this.settings,t=this.wrap,n=e.section,i=e.width,a="width: calc(".concat(100/n.length,"% - 1px)"),s=n.reduce(function(e,t){return e+'<div class="range-section" style="'.concat(a,'">').concat(t.label,"</div>")},""),r='<div class="ui-section-range" style="width: '.concat(i,'px">\n      <div class="bar ui-row">\n        ').concat(s,'\n      </div>\n      <div class="rate">\n        <div style="width: ').concat(i,'px" class="ui-row">').concat(s,'</div>\n      </div>\n      <div class="thumb"></div>\n    <div>');t.innerHTML=r,this.rangeSlider=t.querySelector(".ui-section-range"),this.elementRate=t.querySelector(".rate"),this.elementThumb=t.querySelector(".thumb"),this.elementBar=t.querySelector(".bar")}},{key:"moving",value:function(e){var t,n;this.startDrag&&((t=this.settings.width)<(n=e.clientX-this.rangeSlider.getBoundingClientRect().left)&&(n=t),n<0&&(n=0),this.setPosition(n),this.countValue(n),this.setValue())}},{key:"setPosition",value:function(e){this.elementRate.style.width=e+"px",this.elementThumb.style.left=e+"px"}},{key:"countValue",value:function(e){var t,n=this.settings,i=n.width,a=n.section,s=n.decimal,r=1/a.length,o=e/i,l=Math.floor(o/r),c=0;l>a.length-1&&(l=a.length-1),c=0===l?a[0].value*(o/r):i<=e?a[a.length-1].value:(t=a[l-1].value)+(o-r*l)/r*(a[l].value-t),this.value=s?c.toFixed(s):Math.floor(c)}},{key:"valueToWidth",value:function(e){var i,a,t,n,s=Number(e)||0,r=this.settings,o=r.section,l=r.width,c=r.max,u=r.min,h=o.length;c<=s?this.setPosition(l):s<=u?this.setPosition(0):(i=null,a=0,o.every(function(e,t){var n=e.value;return!(s<=n)||(i=t,a=n,!1)}),"number"==typeof i&&(n=0===i?s/a*(1/h):(t=o[i-1].value,(s-t)/(a-t)*(1/h)+i/h),this.setPosition(l*n)))}},{key:"setValue",value:function(){var e=this.settings.onChange;e&&"function"==typeof e&&e(this.value)}},{key:"startMove",value:function(e){e.preventDefault(),this.startDrag=!0}},{key:"stopMove",value:function(){this.startDrag=!1,this.setStopStatus()}},{key:"setStopStatus",value:function(){var e=this.settings.onSelect;e&&e(this.value)}},{key:"events",value:function(){var t=this,e=this.elementThumb,n=this.elementBar,i=this.elementRate,a=document,s=this.moving;e.addEventListener("mousedown",function(e){t.startMove(e),a.addEventListener("mousemove",s)}),a.addEventListener("mouseup",function(){t.startDrag&&(t.stopMove(),a.removeEventListener("mousemove",s))}),n.addEventListener("click",function(e){t.startMove(e),t.moving(e),t.stopMove()}),i.addEventListener("click",function(e){t.startMove(e),t.moving(e),t.stopMove()})}}]),n}(),I=function(){function i(e,t){_classCallCheck(this,i);var n=Object.assign({},{countElementClass:"count",inputElementSelector:".ui-form-control"},t);this.settings=n,this.init(e)}return _createClass(i,[{key:"init",value:function(s){var e=this.settings,r=e.countElementClass,t=e.inputElementSelector;this.initCountElement(s),O.on(document,"input",s+" "+t,function(){var t=this,e=this.closest(s),n=this.getAttribute("maxlength"),i=e.querySelector("."+r),a=this.timer;clearTimeout(a),a=setTimeout(function(){var e=t.value.trim().length;i.innerHTML=n<e?'<em class="ft-error">'.concat(e,"</em>/").concat(n):"".concat(e,"/").concat(n)},100)})}},{key:"initCountElement",value:function(e){var t,s=this,n=this.settings,r=n.countElementClass,o=n.inputElementSelector;"string"==typeof e&&(t=document.querySelectorAll(e)),"object"===_typeof(e)&&(t=e),t&&[].slice.call(t).forEach(function(e){var t=e.querySelector(o),n=t.value.length,i=t.getAttribute("maxlength"),a=e.querySelector("."+r);a?a.innerHTML="".concat(n,"/").concat(i):e.appendChild(s.createCountElement("".concat(n,"/").concat(i)))})}},{key:"createCountElement",value:function(e){var t=this.settings.countElementClass;return O.createElement("span",{className:t},e)}}]),i}(),D=function(){function n(e,t){_classCallCheck(this,n);this.settings=Object.assign({},{disableClass:"disabled",decimal:2,step:1,min:null,max:null,callback:null},t),this.init(e)}return _createClass(n,[{key:"init",value:function(e){var t=e;"string"==typeof e&&(t=document.querySelector(e)),t&&this.bindEvents(t)}},{key:"bindEvents",value:function(e){var t=e.querySelector("input"),n=e.querySelector(".step-up"),i=e.querySelector(".step-down"),a=this,s=this.settings,r=s.step,o=s.disableClass,l=t.getAttribute("step")?Number(t.getAttribute("step")):r;O.on(e,"click",".step-up",function(){O.hasClass(this,o)||a.stepUp(t,l,n,i)}),O.on(e,"click",".step-down",function(){O.hasClass(this,o)||a.stepDown(t,l,n,i)})}},{key:"stepUp",value:function(e,t,n,i){var a=this.settings.max,s=e.getAttribute("max")?Number(e.getAttribute("max")):a;this.max=s,this.changeInputValue(e,t),this.checkValue("plus",s,Number(e.value),n,i),this.triggerCallback(e)}},{key:"stepDown",value:function(e,t,n,i){var a=this.settings.min,s=e.getAttribute("min")?Number(e.getAttribute("min")):a;this.min=s,this.changeInputValue(e,-t),this.checkValue("minus",s,Number(e.value),n,i),this.triggerCallback(e)}},{key:"changeInputValue",value:function(e,t){var n,i,a=e,s=Number(a.value);s+t<this.min||s+t>this.max||(i=s+t,this.settings.decimal&&(n=Math.pow(10,this.settings.decimal),i=Math.round(i*n)/n),a.value=i)}},{key:"checkValue",value:function(e,t,n,i,a){var s=this.settings.disableClass;"plus"===e&&("number"==typeof t&&t<=n?O.addClass(i,s):O.removeClass(i,s),O.removeClass(a,s)),"minus"===e&&("number"==typeof t&&n<=t?O.addClass(a,s):O.removeClass(a,s),O.removeClass(i,s))}},{key:"triggerCallback",value:function(e){var t=this.settings.callback;t&&"function"==typeof t&&t(e.value)}}]),n}(),F=document,H=function(){function t(e){_classCallCheck(this,t);this.settings=Object.assign({},{selectElement:"div",selectedClass:"selected",showClass:"show",selectShowClass:"ui-select-active",selectClass:"ui-select ui-form-control",optionClass:"ui-select-dropdown hide",bottomMargin:0},e)}return _createClass(t,[{key:"createOptionItem",value:function(e,t){var n=e.selected,i=e.value,a=e.label,s=e.disabled,r=this.settings.selectedClass,o=n?r:"",l=t||{},c="",u="",h=a,d="";if(l.level&&(c=(u=l.level)===this.max?"data-last":""),l.tpl&&(h=l.tpl),l.className&&(d=l.className),""===i)return"";s&&(o+=" disabled");var v=this.value;return!v||(Array.isArray(v)&&(-1<v.indexOf(i+"")||-1<v.indexOf(i))||"string"==typeof v&&(i===v||i+""===v))&&(o=r),'<li class="menu-item '.concat(o," ").concat(d,'" data-value="').concat(i,'" data-level="').concat(u,'" ').concat(c,">").concat(h,"</li>")}},{key:"changeSelectedClass",value:function(e,t){var n=this.settings.selectedClass,i=e.querySelectorAll(".".concat(n));O.forEach(i,function(e){O.removeClass(e,n)}),O.addClass(t,n)}},{key:"removeMultipleTag",value:function(e){var t=e.getAttribute("data-value");this.changeCacheValue(t,!1),this.changeMultiSelectValue(!0)}},{key:"selectClickEvent",value:function(n,i){var a=this;n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=e.target;a.multiple&&O.hasClass(t,"js-del-selected")?a.removeMultipleTag(t):a.clearable&&O.hasClass(t,"icon-clean")?a.clearSelect():this.show?a.hideOption(n):(a.hideOther(n),i&&"function"==typeof i&&i(n),a.showOption(n))},!1)}},{key:"hideOther",value:function(t){var n=this,e=this.settings.selectShowClass,i=F.querySelectorAll(".".concat(e));O.forEach(i,function(e){e!==t&&n.hideOption(e)})}},{key:"showOption",value:function(e){var t=this.settings,n=t.selectShowClass,i=t.showClass,a=t.bottomMargin,s=e,r=e.option;r.style.zIndex="100",O.addClass(r,i),O.addClass(e,n);var o,l=e.getBoundingClientRect(),c=l.height,u=l.top,h=r.children[0].clientHeight;u&&h<u&&u>F.documentElement.clientHeight-h-c-a?(r.style.top="auto",r.style.bottom=c+3+"px"):r.style.bottom="auto",!this.search||(o=e.option.querySelector(".ui-form-control"))&&""!==o.value&&(o.value="",o.trigger("input")),s.show=!0}},{key:"hideOption",value:function(e){var t=this.settings,n=t.selectShowClass,i=t.showClass,a=e,s=e.option;O.removeClass(e,n),O.removeClass(s,i),a.show=!1}},{key:"changeSelectValue",value:function(e,t,n,i,a){var s=3<arguments.length&&void 0!==i&&i,r=4<arguments.length&&void 0!==a?a:"change",o=e;o.innerHTML=n,this.clearable&&t&&(o.innerHTML=n+'<i class="iconfont icon-clean"></i>'),o.originElement.value=t,o.originElement.trigger(r),s||this.hideOption(e)}},{key:"clearSelect",value:function(){var e=this.select;e.innerHTML=this.settings.emptyLabel,e.originElement.value="",e.originElement.trigger("change"),this.value=[],O.forEach(e.option.querySelectorAll(".selected"),function(e){O.removeClass(e,"selected")})}}]),t}();F.addEventListener("click",function(){var e=F.querySelectorAll(".ui-select-active");[].slice.call(e).forEach(function(e){var t=e,n=t.option;O.removeClass(t,"ui-select-active"),O.removeClass(n,"show"),t.show=!1,setTimeout(function(){n.style.zIndex=0},200)})});var M=function(){_inherits(r,H);var a=_createSuper(r);function r(e,t){var n;_classCallCheck(this,r);var i=Object.assign({},{selectElement:"div",selectShowClass:"ui-select-active",bottomMargin:0,selectedClass:"selected",showClass:"show",selectClass:"ui-select ui-form-control",optionClass:"ui-select-dropdown hide",valueName:"value",labelName:"label",placeholder:"",emptyLabel:'<span class="ft-light select-empty">请选择</span>',emptyLi:"暂无选项",group:!1,clearable:!1,multiple:!1,enterable:!1,max:null,checkable:!1,search:!1,data:null,selectFn:null,optionTemplate:null,labelTemplate:null,tagClass:null},t);return i.placeholder&&(i.emptyLabel='<span class="ft-light select-empty">'+i.placeholder+"</span>"),(n=a.call(this,i)).settings=i,n.init(e),n}return _createClass(r,[{key:"init",value:function(e){var t,n,i,a,s,r,o,l,c,u,h=e;h&&("select"!==(t=h.nodeName.toLowerCase())&&"input"!==t||(this.value=[],this.cache={},this.nodeType=t,i=(n=this.settings).data,a=n.group,s=n.max,r=n.search,o=n.checkable,l=n.clearable,c=n.enterable,u=n.multiple,this.data=i,this.multiple=u,this.max=s,this.group=a,this.search=r,this.checkable=o,this.clearable=l,this.enterable=c,(h.multiple||h.hasAttribute("data-multiple"))&&(this.multiple=!0),h.hasAttribute("data-max")&&(this.max=Number(h.getAttribute("data-max"))),h.querySelector("optgroup")&&(this.group=!0),h.hasAttribute("data-search")&&(this.search=!0),h.hasAttribute("data-checkable")&&(this.checkable=!0),h.hasAttribute("data-clearable")&&(this.clearable=!0),h.hasAttribute("data-enterable")&&(this.enterable=!0),h.hasAttribute("data-placeholder")&&(this.settings.placeholder=h.getAttribute("data-placeholder"),this.settings.emptyLabel='<span class="ft-light select-empty">'+this.settings.placeholder+"</span>"),this.data?this.createCacheFromData(this.data):this.data=this.getDataFromSelect(h),this.initSelect(h)))}},{key:"getDataFromSelect",value:function(e,d){var v=this,t=e.children;return[].slice.call(t).map(function(e){var t=e.nodeName.toLowerCase();if("option"===t){var n=e.label,i=e.value,a=e.selected,s=e.disabled,r=n;n||(r=e.textContent);var o={label:r,value:i,disabled:s};return a&&v.value.push(e.value),d&&(o.parent=d),v.cache[i]=o}if("optgroup"!==t)return null;var l=O.createId(),c=[].slice.call(e.children).map(function(e){return e.value});v.cache[l]=c;var u=e.label,h=u;return u||(h=e.textContent),{id:l,child:c,label:h,options:v.getDataFromSelect(e,l),type:"optgroup"}})}},{key:"createCacheFromData",value:function(e){var l=this,t=this.settings,c=t.labelName,u=t.valueName;this.data=e.map(function(e){var t=e[c],n=e[u];return e.selected&&l.value.push(n),Object.assign({},e,{label:t,value:n,selected:!1})}),e.forEach(function(e){var t=e.type,n=e.child,i=e.options,a=e[c],s=e[u];if("optgroup"===t||n||i){var r=s||e.id,o=e.child;return!o&&i&&(o=i.map(function(e){return e.value}),l.createCacheFromData(i)),void(l.cache[r]=o)}l.cache[s]=Object.assign({},e,{label:a,value:s,selected:!1})})}},{key:"initSelect",value:function(e){var t=e,n=this.createSelectDom(e),i=n.select,a=n.value,s=n.label;t.style.display="none",(this.select=i).option=this.createOptionWrap(t),this.createDropdown(),i.options=i.option.querySelectorAll(".menu-item");var r=Math.max(i.clientWidth,i.option.clientWidth);return i.option.style.width=0===r?"100%":r+"px",i.originElement=t,this.multiple?this.changeMultiSelectValue(!1,"init"):this.changeSelectValue(i,a,s,!1,"init"),this.bindEvent(),i}},{key:"createSelectDom",value:function(e){var t=this.settings,n=t.selectClass,i=t.emptyLabel,a=e.getAttribute("data-class")||"",s=n;a&&(s+=" "+a),this.multiple&&(s+=" multiple"),this.group&&(s+=" group"),this.clearable&&(s+=" clearable"),this.enterable&&(s+=" enterable");var r=O.createElement("div",{className:s}),o=this.value[0],l=o?this.cache[o].label:i;return{select:e.parentNode.appendChild(r),value:o,label:l}}},{key:"createOptionWrap",value:function(e){var t=this.settings.optionClass;this.group&&(t+=" group"),this.multiple&&(t+=" multiple"),this.checkable&&(t+=" checkable"),this.max&&this.value.length>=this.max&&(t+=" no-add");var n=O.createElement("div",{className:t});return e.parentNode.appendChild(n)}},{key:"createDropdown",value:function(e){var t='<div class="select-ul">',n=this.settings.emptyLi;this.search&&(t+=r.createSearch()+'<ul class="select-main">'),t+='<ul class="select-main">'+(this.createOptionContent(this.data,e)||'<li class="li-empty">'.concat(n,"</li>")),this.select.option.innerHTML=t+"</ul></div>"}},{key:"createOptionContent",value:function(e,n){var i=this;return e.reduce(function(e,t){return t.type&&"optgroup"===t.type?e+i.createOptionGroup(t,n):e+i.createOptionSingle(t,n)},"")}},{key:"createOptionGroup",value:function(e,t){var n=e.options,i=e.label,a=e.id,s=this.createOptionContent(n,t);if(!s)return"";return this.checkable&&(i='<label class="ui-checkbox"><input type="checkbox" class="check-group" value="'.concat(a,'"><i class="iconfont"></i>').concat(i,"</label>")),'<li class="option-group">\n              <div class="group-label'.concat(" expend",'">\n                <i class="iconfont icon-caret-right"></i>\n                ').concat(i,'</div>\n              <ul class="group-ul">\n              ').concat(s,"\n              </ul>\n            </li>")}},{key:"createOptionSingle",value:function(e,t){var n=this.settings.optionTemplate;if(t&&-1===e.label.indexOf(t))return"";if(n){var i=n(e),a=i,s="";return"object"===_typeof(i)&&(a=i.tpl||"",s=i.className||""),this.checkable?r.createOptionWithCheckbox(e,{tpl:a,className:s}):this.createOptionItem(e,{tpl:a,className:s})}return this.checkable?r.createOptionWithCheckbox(e):this.createOptionItem(e)}},{key:"changeCheck",value:function(e){var t;O.hasClass(e,"check-group")?this.changeCheckParent(e):(t=e.checked,this.changeCacheValue(e.value,t),this.changeCheckAll(e.value)),this.changeMultiSelectValue(!0)}},{key:"changeCheckParent",value:function(e){var t=this,n=e.value,i=e.checked,a=this.cache[n];a.forEach(function(e){t.select.option.querySelector('[value="'+e+'"]').checked=i}),this.changeCacheValue(a,i)}},{key:"changeCheckAll",value:function(e){var t,n,i,a,s=this,r=this.cache[e].parent;r&&(t=this.cache[r],n=this.select.option.querySelector('[value="'+r+'"]'),a=!(i=!0),t.forEach(function(e){s.cache[e].selected?a=!0:i=!1}),n.checked=i,n.indeterminate=!i&&a)}},{key:"toggleItemSelected",value:function(e){var t=-1===this.value.indexOf(e);this.changeCacheValue(e,t)}},{key:"changeCacheValue",value:function(e,t){var n=this;this.multiple?Array.isArray(e)?e.forEach(function(e){n.dealMultiValue(e,t)}):this.dealMultiValue(e,t):this.value=[e]}},{key:"resetValue",value:function(e){var t,n,i;Array.isArray(e)&&(this.value=e,this.multiple?this.changeMultiSelectValue(!1,"change"):(t=e[0],n=this.select,i=this.cache[t].label,this.changeSelectValue(n,t,i),this.changeMultiSelectedClass()))}},{key:"dealMultiValue",value:function(e,t){var n=this.select,i=this.max,a=this.value.indexOf(e);t?-1===a&&this.value.push(e):-1<a&&this.value.splice(a,1),i&&(this.value.length>=i?O.addClass(n.option,"no-add"):O.removeClass(n.option,"no-add"))}},{key:"changeMultiSelectedClass",value:function(){var e=this.select,n=this.value,i=this.settings.selectedClass;O.forEach(e.option.querySelectorAll(".menu-item"),function(e){var t=e.getAttribute("data-value");-1<n.indexOf(t)?O.addClass(e,i):O.removeClass(e,i)})}},{key:"changeOriginElementValue",value:function(e){var t,n=this.select,i=this.nodeType,a=this.value,s=n.originElement;"input"===i&&(s.value=this.value),"select"===i&&(t=s.options,Array.isArray(a)&&O.forEach(t,function(e){e.selected=-1<a.indexOf(e.value)})),s.trigger(e)}},{key:"changeMultiSelectValue",value:function(e,t){var n=0<arguments.length&&void 0!==e&&e,i=1<arguments.length&&void 0!==t?t:"change",a=this.select;this.changeOriginElementValue(i),n||this.hideOption(a),this.changeMultiSelectLabel(i),this.changeMultiSelectedClass()}},{key:"changeMultiSelectLabel",value:function(e){var t=this.select;t.innerHTML=this.createMultiTag()||this.settings.emptyLabel,this.enterable&&"change"===e&&(t.querySelector(".select-input").focus(),this.createDropdown())}},{key:"createEnterInput",value:function(){var e=this.value,t=this.enterable,n=this.settings.placeholder;return t?e.length?'<input class="select-input" autocomplete="off" >':'<input class="select-input" placeholder="'.concat(n,'" autocomplete="off">'):""}},{key:"createMultiTag",value:function(){var r=this,e=this.value,t=this.settings,o=t.tagClass,l=t.labelTemplate,n=this.createEnterInput();return e.length?e.reduce(function(e,t){var n,i,a=r.cache[t],s="gray";return r.enterable&&!a&&(i=n=t),a&&(n=a.label,i=a.value),o&&("string"==typeof o&&(s=o),"function"==typeof o&&(s=o(a))),l?e+l(i,n):e+'<span class="ui-tag '.concat(s,' closeable" data-tooltip data-position="center top" data-title="').concat(n,'">').concat(n,' <i data-value="').concat(i,'" class="iconfont icon-times js-del-selected"></i></span>')},"")+n:n||this.settings.emptyLabel}},{key:"checkLabels",value:function(i){var a,e,t,s=this.cache;Object.keys(s).forEach(function(e){var t=s[e],n=t.value;t.label===i&&(a=n)}),void 0===a?(e="cus-"+O.createId(),this.cache[e]={label:i,value:e},this.changeCacheValue(e,!0)):(t=!(-1<this.value.indexOf(a)),this.changeCacheValue(a,t)),this.changeMultiSelectLabel("change")}},{key:"dealSelectEnter",value:function(e,t){var n;clearTimeout(this.inputTimer),13===e.keyCode&&(e.preventDefault(),(n=t.value).trim().length&&this.checkLabels(n))}},{key:"handleClickOptionItem",value:function(e){var t,n,i=this,a=i.select,s=i.settings.selectFn;O.hasClass(e,"label-item")||O.hasClass(e,"disabled")||i.max&&i.value.length>=i.max&&!O.hasClass(e,"selected")||(i.multiple||!O.hasClass(e,"selected")?(t=e.getAttribute("data-value"),n=i.cache[t].label,s&&"function"==typeof s&&s(t,a),i.toggleItemSelected(t),i.multiple?i.changeMultiSelectValue(!0):(i.changeSelectValue(a,t,n),i.changeMultiSelectedClass())):i.hideOption(a))}},{key:"bindEvent",value:function(){var t=this.select,i=t.option,a=this;this.selectClickEvent(t,function(){a.enterable&&a.createDropdown()}),O.on(t,"keydown",".select-input",function(e){e.stopPropagation(),a.dealSelectEnter(e,this)}),O.on(t,"click",".select-input",function(e){e.stopPropagation(),a.showOption(t)}),O.on(i,"click",".menu-item",function(e){e.stopPropagation(),a.handleClickOptionItem(this)}),O.on(i,"click",".group-label",function(e){e.stopPropagation(),O.toggleClass(this,"expend")}),O.on(i,"change",'input[type="checkbox"]',function(){a.changeCheck(this)}),O.on(i,"click",".select-search",function(e){e.stopPropagation()}),this.inputTimer=null,O.on(t,"input",".select-input",function(){var n=this;clearTimeout(a.inputTimer),a.inputTimer=setTimeout(function(){var e=n.value,t=a.createOptionContent(a.data,e)||'<li class="li-empty">暂无搜索结果</li>';i.querySelector(".select-main").innerHTML=t},200)}),O.on(i,"input",".select-search-input",function(){var n=this;clearTimeout(a.inputTimer),a.inputTimer=setTimeout(function(){var e=n.value,t=a.createOptionContent(a.data,e)||'<li class="li-empty">暂无搜索结果</li>';i.querySelector(".select-main").innerHTML=t},200)}),O.on(i,"keydown",".select-search-input",function(e){13===e.keyCode&&e.preventDefault()})}}],[{key:"createSearch",value:function(){return'<div class="select-search">\n      <input type="text" class="ui-form-control select-search-input">\n    </div>'}},{key:"createOptionWithCheckbox",value:function(e,t){var n=e.selected,i=e.value,a=e.label,s=n?"checked":"",r=e.disabled?"disabled":"",o=t?t.tpl:"",l=t?t.className:"";return'<li class="menu-item label-item '.concat(r," ").concat(l,'" title="').concat(a,'" data-value="').concat(i,'">\n      <label class="ui-checkbox"><input type="checkbox" ').concat(s,' value="').concat(i,'"/><i class="iconfont"></i>').concat(o,"</label>\n    </li>")}}]),r}();function R(e,t){if("string"!=typeof e)return"object"===_typeof(e)&&null!==e?new M(e,t):null;var n=document.querySelectorAll(e);return[].slice.call(n).map(function(e){return new M(e,t)})}var U=document,B=function(){_inherits(r,H);var s=_createSuper(r);function r(e,t){_classCallCheck(this,r);var n,i=Object.assign({},{selectElement:"div",selectedClass:"selected",showClass:"show",selectShowClass:"ui-select-active",selectClass:"ui-select ui-form-control",optionGroupClass:"ui-select-dropdown menu-group hide",ajaxUrl:[],valueName:"value",labelName:"label",dataName:"id",data:{},selectFn:null,selectFinalFn:null},t);(n=s.call(this,i)).settings=i;var a=e;return"string"==typeof e&&(a=U.querySelector(e)),a?(n.select=a,n.init(),n):_possibleConstructorReturn(n)}return _createClass(r,[{key:"init",value:function(){this.complete=!1,this.linkage=[],this.values=[],this.defaultValue=null,this.max=0,this.initAjaxSelect()}},{key:"initAjaxSelect",value:function(){var e=this,t=this.select,n=this.settings.ajaxUrl,i=t.getAttribute("data-default");i&&(this.defaultValue=i.split(",")),(n.length||t.getAttribute("data-ajax"))&&(this.urlArray=n.length?n:t.getAttribute("data-ajax").split(","),this.max=this.urlArray.length,this.level=Number(t.getAttribute("data-level"))||0,this.initInput(),this.initDropdownWrap(),this.createAjaxOption(1),this.selectClickEvent(t,function(){!e.complete&&e.defaultValue&&(e.initStatus(t),e.createAjaxOption(1))}),this.optionClickEvent())}},{key:"resetValue",value:function(e){this.defaultValue=e,this.createAjaxOption(1)}},{key:"initStatus",value:function(e){var t=e.option;this.linkage=[],t.innerHTML=""}},{key:"initInput",value:function(){var e=this.select,t=e.parentNode,n=e.getAttribute("data-input");e.originElement=n?U.querySelector(n):t.appendChild(O.createElement("input",{type:"hidden",name:e.id}))}},{key:"initDropdownWrap",value:function(){var e=this.select,t=this.settings.optionGroupClass,n=e.parentNode.appendChild(O.createElement("div",{className:t})),i=Math.max(e.clientWidth,n.clientWidth);n.style.width=i?i+"px":"auto",e.option=n}},{key:"createAjaxOption",value:function(t,e,n){var i=this,a=1<arguments.length&&void 0!==e?e:{},s=2<arguments.length&&void 0!==n&&n,r=this.select,o=this.urlArray[t-1],l=this.settings.data;o?O.fetchData(o,Object.assign({},l,a)).then(function(e){200===e.code&&(O.isEmpty(e.data)?(i.selectFinalLevelEvent(),i.removeNextSiblingOptions(t-1)):i.appendAjaxOption(e.data,r,t,s))}):this.selectFinalLevelEvent()}},{key:"selectFinalLevelEvent",value:function(){var e=this.settings.selectFinalFn;"function"==typeof e&&e(this.values)}},{key:"appendAjaxOption",value:function(e,t,i,a){var s=this,r="",o=!!this.defaultValue,n=this.settings,l=n.valueName,c=n.labelName;e.forEach(function(e){var t=!1;o&&!a&&(t=e[l]==s.defaultValue[i-1]);var n='<div class="menu-item-text" title="'.concat(e[c],'">').concat(e[c],"</div>");r+=s.createOptionItem({selected:t,value:e[l],label:e[c]},{level:i,tpl:n})});var u,h=t.option.appendChild(O.createElement("ul",{className:"select-main"},r));a||(u=h.querySelector(".selected"))&&(this.triggerNewItem(u,t),u.offsetTop>h.clientHeight&&(h.scrollTop=u.offsetTop-h.clientHeight/2)),this.removeNextSiblingOptions(i-1),this.linkage.push(h)}},{key:"removeNextSiblingOptions",value:function(e){var t=this.linkage,n=this.urlArray.length;t.splice(e,n).forEach(function(e){e.parentNode.removeChild(e)})}},{key:"optionClickEvent",value:function(){var n=this,i=this.select;O.on(i.option,"click",".menu-item",function(e){e.preventDefault(),e.stopPropagation();var t=this.parentNode;n.changeSelectedClass(t,this),n.triggerNewItem(this,i,"click")}),i.option.addEventListener("click",function(e){e.stopPropagation()})}},{key:"triggerNewItem",value:function(e,t,n){var i=e.getAttribute("data-value"),a=Number(e.getAttribute("data-level")),s=e.innerHTML.trim(),r=!n,o=this.values,l=this.settings,c=l.selectFn,u=l.dataName;o[a-1]={value:i,label:s},o.splice(a,o.length),"function"==typeof c&&c(e,t,n),this.level?(a<this.level&&(this.complete=!1,this.createAjaxOption(a+1,_defineProperty({},u,i),n)),a===this.level&&(this.complete=!0,this.setValue(r),this.defaultValue=this.values.map(function(e){return e.value}),this.selectFinalLevelEvent())):(this.complete=!0,this.setValue(),this.createAjaxOption(a+1,_defineProperty({},u,i),n))}},{key:"setValue",value:function(e){var t=this.select,n=[],i=[];this.values.forEach(function(e){n.push(e.value),i.push(e.label)}),this.changeSelectValue(t,n.join(","),i.join(" / "),e)}},{key:"destroy",value:function(){var e=this.select,t=e.option;e.getAttribute("data-input")||e.originElement.parentNode.removeChild(e.originElement),t.parentNode.removeChild(t)}}]),r}(),V=function(){_inherits(s,H);var a=_createSuper(s);function s(e,t){_classCallCheck(this,s);var n,i=Object.assign({},{selectShowClass:"ui-select-active",selectedClass:"selected",url:"",loadingClass:"loading",showClass:"show",selectClass:"ui-autocomplete",optionClass:"ui-select-dropdown hide",queryKey:"keyword",labelName:"label",valueName:"id",placeholder:"请输入",emptyLi:"暂无匹配结果",liHeight:32,fetchSuccess:function(e){return 200===e.code}},t);return(n=a.call(this,i)).settings=i,n.init(e),n.events(),n}return _createClass(s,[{key:"init",value:function(e){var t,n,i=e;"string"==typeof e&&(i=document.querySelector(e)),i&&(this.element=i,this.fetchUrl=this.settings.url,i.getAttribute("data-url")&&(this.fetchUrl=i.getAttribute("data-url")),n=(t=i.parentNode.appendChild(this.createIconInput())).appendChild(this.createOption()),this.selectInput=t.querySelector("input"),this.optionUl=n.querySelector(".select-main"),this.select=t.querySelector(".ui-icon-input"),this.select.option=n,this.timer=null,this.blurTimer=null,this.cacheOptionData=[])}},{key:"fetchData",value:function(e,t){var n=this,i=this.settings,a=i.fetchSuccess,s=i.queryKey,r={};O.addClass(this.select,"loading"),""!==e&&(r[s]=e),O.fetchData(this.fetchUrl,r).then(function(e){O.removeClass(n.select,"loading"),a(e)&&t&&t(e)})}},{key:"createIconInput",value:function(){var e=document.createElement("div"),t=this.settings,n=t.selectClass,i=t.placeholder,a=O.createId();return e.className=n,e.innerHTML='<div class="ui-icon-input">\n      <input type="text" class="ui-form-control" autocomplete="off" placeholder="'.concat(i,'" id="input').concat(a,'">\n      <label class="suffix" for="input').concat(a,'"><i class="iconfont icon-search"></i></label>\n    </div>'),e}},{key:"createOption",value:function(){var e=this.settings.optionClass,t=document.createElement("div");return t.className=e,t.innerHTML='<div class="select-ul"><ul class="select-main"></ul></div>',t}},{key:"changeOption",value:function(e){var t,n=this,i=this.settings,a=i.labelName,s=i.valueName,r=i.emptyLi;Array.isArray(e)&&e.length?(this.optionUl.innerHTML=e.reduce(function(e,t){return e+n.createOptionItem({label:t[a],value:t[s]})},""),t=e.filter(function(e){return e[s].toString()===n.value}),this.selectIndex=t.length?t[0].$index:-1):(this.optionUl.innerHTML='<li class="li-empty">'.concat(r,"</li>"),this.selectIndex=-1)}},{key:"handleFocus",value:function(e){var n=this,t=e.target.value;this.hideOther(this.select),this.fetchData(t,function(e){var t=e.data.map(function(e,t){return Object.assign({},e,{$index:t})});n.cacheOptionData=t,n.changeOption(t),n.showOption(n.select)})}},{key:"handleSelect",value:function(e){var t=e.getAttribute("data-value"),n=e.innerText;this.changeLabelInput(n),this.changeValue(t)}},{key:"handleBlur",value:function(){var e=this;clearTimeout(this.blurTimer),this.blurTimer=setTimeout(function(){void 0!==e.value&&("object"!==_typeof(e.value)||e.value)||(e.selectInput.value="")},100)}},{key:"changeLabelInput",value:function(e){this.selectInput.value=e}},{key:"changeValue",value:function(e){this.value=e,this.element.value=e,this.element.trigger("change")}},{key:"scrollToSelected",value:function(e){var t=e*this.settings.liHeight;this.optionUl.scrollTo({top:t})}},{key:"handleDown",value:function(){var e=this.selectIndex,t=this.cacheOptionData.length,n=(e+1+t)%t;this.changeSelectLi(n)}},{key:"handleUp",value:function(){var e=this.selectIndex,t=this.cacheOptionData.length;e<0&&(e=t);var n=(e-1+t)%t;this.changeSelectLi(n)}},{key:"changeSelectLi",value:function(e){this.selectIndex=e;var t=this.optionUl.children[e];this.handleSelect(t),this.changeSelectedClass(this.optionUl,t),this.scrollToSelected(e)}},{key:"events",value:function(){var t=this,e=this.selectInput,n=this.optionUl,i=this;this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),e.addEventListener("focus",this.handleFocus),e.addEventListener("blur",this.handleBlur),e.addEventListener("keydown",function(e){13===e.keyCode&&e.preventDefault(),40===e.keyCode&&i.handleDown(),38===e.keyCode&&(e.preventDefault(),i.handleUp())}),e.addEventListener("input",function(e){i.value=null,t.handleFocus(e)}),e.addEventListener("click",function(e){e.stopPropagation()}),O.on(n,"click",".menu-item",function(){i.handleSelect(this)})}}]),s}(),z=function(){function a(e){_classCallCheck(this,a);var t={modal:null,modalBox:".modal-box",modalContent:".modal-content",modalTitle:".modal-title",title:null,type:null,open:"[data-modal-open]",close:"[data-modal-close]",showClass:"modal-visible",animateClass:"fadeInDown",resize:!1,clickOutside:!0,closeKey:27,onOpen:null,onClose:null,onResize:null,onCancel:null,onConfirm:null,footer:!0,cancelBtn:"取消",confirmBtn:"确定",btnOkClass:"ui-button primary",btnCancelClass:"ui-button",btnType:"",zIndex:19e3};e&&"confirm"===e.type&&(t.btnOkClass="ui-button small primary",t.btnCancelClass="ui-button small"),this.settings=Object.assign({},t,e),this.isShow=!1,this.current=null,this.init()}return _createClass(a,[{key:"init",value:function(){var e=this.settings.modal,t=this.settings,n=t.modalBox,i=t.modalContent,a=t.modalTitle,s=t.type,e=e||this.createModalHtml(s);this.modal=e,this.modalBox=e.querySelector(n),this.modalTitle=e.querySelector(a),this.modalContent=e.querySelector(i),this.modalOk=e.querySelector(".modal-ok"),this.modalCancel=e.querySelector(".modal-cancel"),this.events()}},{key:"createModalHtml",value:function(e){var t=this.settings.zIndex,n="",i="ui-modal";switch(e){case"confirm":n=this.createConfirmTypeHtml(),i="ui-modal-confirm";break;default:n=this.createModalTypeHtml()}var a=O.createElement("div",{className:i},n);return a.style.zIndex=t,document.body.appendChild(a)}},{key:"createModalFooter",value:function(){var e,t=this.settings,n=t.cancelBtn,i=t.footer,a=t.confirmBtn,s=t.btnOkClass,r=t.btnCancelClass,o=t.onCancel,l="",c="",u="";return i&&(a&&(l='<button class="'.concat(s,' modal-ok">').concat(a,"</button>")),n&&(e=o?"":"data-modal-close",c='<button class="'.concat(r,' modal-cancel" ').concat(e,">").concat(n,"</button>")),(a||n)&&(u='<div class="modal-footer">'.concat(c).concat(l,"</div>"))),u}},{key:"createModalTypeHtml",value:function(){var e=this.settings.resize,t=e?" resizable":"",n=e?'<span class="resize-trigger"></span>':"",i=this.createModalFooter();return'<div class="modal-box'.concat(t,'">')+'<span class="modal-close iconfont icon-times" data-modal-close></span><div class="modal-title"></div><div class="modal-content"></div>'+"".concat(i).concat(n,"</div>")}},{key:"createConfirmTypeHtml",value:function(){return'<div class="ui-confirm modal-box"><div class="modal-content"></div>'+this.createModalFooter()+"</div>"}},{key:"setContent",value:function(e){this.modalContent.innerHTML=e}},{key:"setTitle",value:function(e){e&&(this.modalTitle.innerHTML='<div class="modal-head">'.concat(e,"</div>"))}},{key:"show",value:function(e){var t=e.content,n=e.title;this.setContent(t),this.setTitle(n),this.toggleShowHide("show"),document.body.scrollHeight>document.documentElement.clientHeight&&O.addClass(document.querySelector("html"),"modal-open")}},{key:"confirm",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,i=a.createConfirmHtml(e);this.getData=n,this.setContent(i),this.toggleShowHide("show")}},{key:"hide",value:function(){this.toggleShowHide("hide"),this.modalContent.innerHTML="",this.modalTitle&&(this.modalTitle.innerHTML=""),document.querySelector(".modal-visible")||O.removeClass(document.querySelector("html"),"modal-open")}},{key:"toggleShowHide",value:function(e){var t=this.modal,n=this.modalBox,i=this.settings,a=i.showClass,s=i.animateClass,r=i.onOpen,o=i.onClose;"show"===e&&(O.addClass(t,a),O.addClass(n,s),this.isShow=!0,"function"==typeof r&&r(this)),"hide"===e&&(this.isShow=!1,"function"==typeof o&&o(this),O.removeClass(t,a),O.removeClass(n,s))}},{key:"events",value:function(){var t=this,n=this,e=this.settings,i=e.clickOutside,a=e.closeKey,s=e.resize,r=e.onCancel,o=e.onConfirm,l=this.modalOk,c=this.modalCancel;O.on(this.modal,"click","[data-modal-close]",function(){t.hide()}),l&&o&&l.addEventListener("click",function(e){o(e,n,n.getData)}),c&&r&&c.addEventListener("click",function(e){r(e,n,n.getData)}),i&&document.body.addEventListener("keydown",function(e){e.keyCode===a&&t.hide()}),s&&this.resizeEvent()}},{key:"resizeEvent",value:function(){var i,a,s,r,o,l,c=this.modalBox,t=document.documentElement,u=this.settings.onResize;function n(e){var t=s+2*(e.clientX-i),n=r+2*(e.clientY-a);o<t&&(t=o),l<n&&(n=l),c.style.width=t+"px",c.style.height=n+"px","function"==typeof u&&u(t,n)}function h(){t.removeEventListener("mousemove",n,!1),t.removeEventListener("mouseup",h,!1)}c.querySelector(".resize-trigger").addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),i=e.clientX,a=e.clientY,o=.95*t.clientWidth,l=.98*t.clientHeight,s=c.getBoundingClientRect().width,r=c.getBoundingClientRect().height,t.addEventListener("mousemove",n,!1),t.addEventListener("mouseup",h,!1)},!1)}}],[{key:"createConfirmHtml",value:function(e){var t=e.content,n=e.desc,i=e.dom,a=t?'<div class="warn">'.concat(t,"</div>"):"",s=n?'<div class="desc">'.concat(n,"</div>"):"";return i||"".concat(a).concat(s)}}]),a}(),W=function(){function o(e){_classCallCheck(this,o);this.settings=Object.assign({},{duration:3e3,position:"top",top:27},e),this.init()}return _createClass(o,[{key:"init",value:function(){this.count=0}},{key:"success",value:function(e,t,n){this.show(e,!0,t,n)}},{key:"warn",value:function(e,t,n){this.show(e,!1,t,n)}},{key:"show",value:function(e,t,n,i){var a=o.createAlert(e,t,i),s=document.querySelector(".ui-alert");s&&s.parentNode.removeChild(s);var r=document.body.appendChild(a);"center"===this.settings.position||"center"===n?r.style.top="50%":("number"==typeof this.settings.top&&this.settings.top,r.style.top=this.settings.top),r.querySelector(".alert-close")&&r.querySelector(".alert-close").addEventListener("click",function(){o.hide(r)}),setTimeout(function(){o.hide(r)},this.settings.duration)}}],[{key:"hide",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"createAlert",value:function(e,t,n){var i="success";"boolean"!=typeof t||t||(i="warn");var a=o.createDomString(e,"alert-"+i,n);return O.createElement("div",{className:"ui-alert"},a)}},{key:"createDomString",value:function(e,t,n){var i=(2<arguments.length&&void 0!==n?n:{}).closeable,a=i?'<span class="alert-close iconfont"></span>':"";return'<div class="alert-content '.concat(t," ").concat(i?"alert-closeable":"",'">').concat(e).concat(a,"</div>")}}]),o}(),$=function(){function k(e){_classCallCheck(this,k);this.settings=Object.assign({},{position:"right bottom",gap:4},e)}return _createClass(k,[{key:"setPosition",value:function(e,t){var n=this.settings,i=n.gap,a=n.position,s=t.getBoundingClientRect(),r=s.left,o=s.top,l=t.getAttribute("data-position")||a,c=t.offsetHeight,u=t.offsetWidth,h=e.offsetHeight,d=e.offsetWidth,v=window,p=v.scrollX,f=v.scrollY,m={targetHeight:c,targetWidth:u,targetLeft:r+(p||document.documentElement.scrollLeft||0),targetTop:o+(f||document.documentElement.scrollTop||0),left:r,top:o,scrollX:p||document.documentElement.scrollLeft||0,scrollY:f||document.documentElement.scrollTop||0,elementHeight:h,elementWidth:d},g=e.style;e.style.width=e.offsetWidth+"px";var y=_slicedToArray(l.split(" "),2),b=y[0],C=y[1];"middle"===C?k.setPositionMiddle(b,m,g,i):(k.setPositionVertical(C,m,g,i),k.setPositionHorizontal(b,m,g))}}],[{key:"setPositionVertical",value:function(e,t,n,i){var a=t.targetTop,s=t.targetHeight,r=t.elementHeight,o=t.top,l=t.scrollY,c=a+s+i,u=a-r-i,h=n;o<r?u=c:c-l+r>document.documentElement.clientHeight&&(c=u),"bottom"===e&&(h.top=c+"px"),"top"===e&&(h.top=u+"px")}},{key:"setPositionHorizontal",value:function(e,t,n){var i=n,a=t.targetLeft,s=t.targetWidth,r=t.elementWidth;switch(e){case"right":i.left=a+"px";break;case"left":i.left=a+s-r+"px";break;case"center":i.left=a+s/2-r/2+"px"}}},{key:"setPositionMiddle",value:function(e,t,n,i){var a=n,s=t.targetTop,r=t.targetHeight,o=t.elementHeight,l=t.elementWidth,c=t.targetLeft,u=t.targetWidth;a.top=s+r/2-o/2+"px","left"===e&&(a.left=c-i-l+"px"),"right"===e&&(a.left=c+u+i+"px")}}]),k}(),G=document,X=function(){_inherits(u,$);var a=_createSuper(u);function u(e,t){_classCallCheck(this,u);var n,i=Object.assign({},{className:"ui-tooltip",position:"left bottom",width:"",maxWidth:"",gap:4,delay:0,showEvent:"mouseover",hideEvent:"mouseout",template:null},t);return(n=a.call(this,i)).settings=i,n.init(e),n}return _createClass(u,[{key:"init",value:function(n){var i=this,e=this.settings,t=e.showEvent,a=e.hideEvent,s=e.delay;O.on(G,t,n,function(e){var t=this;e.target.matches(n)&&(this.timer=setTimeout(function(){i.showTooltip(t)},200))}),O.on(G,a,n,function(){var e,t=this;this.timer&&clearTimeout(this.timer),this.tooltip&&(this.clearTimer&&clearTimeout(this.clearTimer),e=+(this.getAttribute("data-delay")||s),this.clearTimer=setTimeout(function(){u.destroyTooltip(t.tooltip,t)},e))})}},{key:"showTooltip",value:function(e){var t,n,i,a=this,s=e,r=this.settings,o=r.width,l=r.maxWidth,c=r.delay;s.noTooltip||(s.getAttribute("data-title")&&s.scrollWidth<=s.offsetWidth&&s.scrollHeight<=s.offsetHeight?s.noTooltip=!0:(t=s.getAttribute("data-position")||this.settings.position,n=this.createTooltipElement(s,t),(i=n.style).display="block",i.opacity="0",o&&(i.width=o+"px",i.maxWidth="none"),l&&(i.maxWidth=l+"px"),i.left="0",i.bottom="0",s.tooltip=n,(s.getAttribute("data-delay")||c)&&(s.tooltip.addEventListener("mouseenter",function(){clearTimeout(s.clearTimer)}),s.tooltip.addEventListener("mouseleave",function(){u.destroyTooltip(s.tooltip,s)})),setTimeout(function(){i.left="auto",i.bottom="auto",a.setPosition(n,e),i.opacity="1"},2)))}},{key:"createTooltipElement",value:function(e,t){var n=this.settings.template,i=e.getAttribute("data-text"),a=e.getAttribute("data-title"),i=(e.querySelector(".data-tip")?e.querySelector(".data-tip").innerHTML:"")||i||a,s=this.settings.className;"function"==typeof n&&(i=n(i));var r=O.createElement("div",{className:"".concat(s," ").concat(t)},i);return document.body.appendChild(r)}}],[{key:"destroyTooltip",value:function(e,t){e&&(e.parentNode.removeChild(e),t.tooltip=null)}}]),u}(),Y=[],Z=function(){_inherits(s,$);var a=_createSuper(s);function s(e,t){_classCallCheck(this,s);var n,i=Object.assign({},{className:"ui-popper",position:"center bottom",content:"",gap:4,zIndex:null},t);return(n=a.call(this,i)).settings=i,n.init(e),n}return _createClass(s,[{key:"init",value:function(e){var t,n,i;e&&(t=this.settings.zIndex,(n=e.getAttribute("data-position"))&&(this.settings.position=n),s.hideOthers(),i=this.createPopper(),this.setPosition(i,e),t&&(i.style.zIndex=t),this.popper=i,Y.push(this),this.events())}},{key:"createPopper",value:function(){var e=this.settings,t=e.className,n=e.content,i=O.createElement("div",{className:"".concat(t)},n);return document.body.appendChild(i)}},{key:"destroy",value:function(){this.popper&&(this.popper.parentNode.removeChild(this.popper),this.popper=null)}},{key:"events",value:function(){var t=this;this.popper.addEventListener("click",function(e){e.target.hasAttribute("data-popper-close")&&t.destroy()})}}],[{key:"hideOthers",value:function(){Y.forEach(function(e){e.destroy()}),Y=[]}}]),s}();document.addEventListener("click",function(e){e.target.closest(".ui-popper")||(Y.forEach(function(e){e.destroy()}),Y=[])},!1),window.addEventListener("resize",function(){Y.length&&(Y.forEach(function(e){e.destroy()}),Y=[])},!1);var K=null,Q=function(){function r(e){_classCallCheck(this,r);this.settings=Object.assign({},{duration:2e3,position:"center"},e)}return _createClass(r,[{key:"show",value:function(e,t,n){var i=n||this.settings.position,a=r.createAlert(t,e,i),s=document.body.appendChild(a);K&&r.hide(K),K=s,setTimeout(function(){s&&s.parentNode&&(s.parentNode.removeChild(s),K=null)},this.settings.duration)}},{key:"warn",value:function(e,t){this.show("warn",e,t)}},{key:"success",value:function(e,t){this.show("success",e,t)}},{key:"loading",value:function(e){this.show("loading",null,e)}}],[{key:"hide",value:function(e){e.parentNode.removeChild(e)}},{key:"createDomString",value:function(e,t){var n="toast-".concat(t),i="success"===t?'<i class="iconfont icon-success-fill"></i>':"";return'<div class="ui-toast"><div class="toast-content '.concat(n,'">').concat(i).concat(e,"</div></div>")}},{key:"createAlert",value:function(e,t,n){var i=r.createDomString(e,t);return O.createElement("div",{className:"ui-toast-wrap ".concat(n)},i)}}]),r}(),J=function(){function t(e){_classCallCheck(this,t);this.settings=Object.assign({},{layer:null,close:"[data-layer-close]",layerClass:"ui-layer",showClass:"layer-visible",position:"right",width:640,closeBtn:!0,onOpen:null,onClose:null},e),this.init(),this.events()}return _createClass(t,[{key:"init",value:function(){var e=(e=this.settings.layer)||this.createLayer();this.layer=e,this.layerHead=e.querySelector(".layer-head"),this.layerContent=e.querySelector(".layer-content")}},{key:"createLayer",value:function(){var e=this.settings,t=e.width,n=e.layerClass,i=e.position,a=t;"number"==typeof t&&(a=t+"px");var s=e.closeBtn?'<span class="layer-close iconfont icon-times" data-layer-close></span>':"",r='<div class="layer-box layer-'.concat(i,'" style="width: ').concat(a,";min-width: ").concat(a,'">').concat(s,' \n      <div class="layer-head"></div>\n      <div class="layer-content"></div>\n    </div>'),o=O.createElement("div",{className:n},r);return document.body.appendChild(o)}},{key:"setContent",value:function(e){this.layerContent.innerHTML=e}},{key:"setTitle",value:function(e){e&&(this.layerHead.innerHTML='<div class="layer-title">'.concat(e,"</div>"))}},{key:"show",value:function(e){var t=this.layer,n=this.settings,i=n.showClass,a=n.onOpen,s=e.content,r=e.title;this.setContent(s),this.setTitle(r),O.addClass(document.querySelector("html"),"layer-open"),O.addClass(t,i),a&&a(this)}},{key:"simpleShow",value:function(){var e=this.layer,t=this.settings.showClass;O.addClass(document.querySelector("html"),"layer-open"),O.addClass(e,t)}},{key:"hide",value:function(){var e=this.settings,t=e.onClose,n=e.showClass;t&&t(this),O.removeClass(this.layer,n),document.querySelector("."+n)||O.removeClass(document.querySelector("html"),"layer-open")}},{key:"events",value:function(){var e=this;O.on(this.layer,"click","[data-layer-close]",function(){e.hide()})}}]),t}(),ee=function(){function r(e,t){_classCallCheck(this,r);var n=document.querySelector(e);n&&(this.settings=Object.assign({},{className:"",defaultValue:[],inputType:"text",editable:!0,valueSelector:".tag-values",onDeleteFn:null,max:null},t),this.wrap=n,this.init())}return _createClass(r,[{key:"init",value:function(){var e=this.settings,t=e.defaultValue,n=e.editable;this.tags=[],this.valueInput=document.querySelector(this.settings.valueSelector);var i=r.createTagList(),a=this.createInput();this.wrap.appendChild(i),n&&this.wrap.appendChild(a),this.list=i,this.input=a;var s=this.valueInput.value?this.valueInput.value.split(","):t;this.addTags(s),this.events()}},{key:"createInput",value:function(){var e=this.settings.inputType;return O.createElement("input",{type:e,className:"tag-input"})}},{key:"emptyTags",value:function(){this.list.innerHTML="",this.tags=[],this.addValueToInput()}},{key:"addTags",value:function(e){var t=this;Array.isArray(e)&&e.length&&e.forEach(function(e){t.addTagValue(e)})}},{key:"addTagValue",value:function(e){var t=this.settings.max;e&&this.tags.indexOf(e)<0&&(!t||this.tags.length<t)&&(this.tags.push(e),this.appendTag(e),this.addValueToInput()),this.settings.editable&&(this.input.value="")}},{key:"appendTag",value:function(e){var t=r.createTagDom(e),n=document.createElement("div");n.innerHTML=t,this.list.appendChild(n.firstElementChild)}},{key:"removeTagValue",value:function(e){for(var t=this.tags,n=this.settings.onDeleteFn,i=0,a=t.length;i<a;i+=1)if(t[i]===e)return t.splice(i,1),void(n&&n(e,i))}},{key:"removeTag",value:function(e){var t=e.getAttribute("data-value");this.removeTagValue(t);var n=e.parentNode;this.wrap.querySelector(".tag-list").removeChild(n),this.addValueToInput()}},{key:"addValueToInput",value:function(){var e=this.valueInput;this.tags.length?e.value=this.tags.join(","):e.value="",e.trigger("change")}},{key:"events",value:function(){var e=this.wrap,i=this,t=this.input,n=this.settings.editable;O.on(e,"click",".tag-delete",function(){i.removeTag(this)}),n&&e.addEventListener("click",function(){i.input.focus()},"false"),t.addEventListener("keydown",function(e){var t=e.keyCode,n=this.value.trim?this.value.trim():this.value;13!==t&&32!==t||(e.preventDefault(),i.addTagValue(n))}),t.addEventListener("blur",function(e){var t=this.value.trim?this.value.trim():this.value;i.addTagValue(t)})}}],[{key:"createTagList",value:function(){return O.createElement("ul",{className:"tag-list"})}},{key:"createTagDom",value:function(e){return'<li class="tag">'.concat(e,'<a href="javascript:;" data-value="').concat(e,'" class="iconfont icon-times tag-delete"></a></li>')}}]),r}(),te=document,ne={chinese:"请填写中文",date:"日期格式不正确",email:"邮箱格式不正确",english:"请填写字母",idCard:"身份证号格式不正确",mobile:"手机号格式不正确",number:"请填写数字",phone:"手机号格式不正确",qq:"qq格式不正确",weChat:"微信格式不正确",tel:"电话号码格式不正确",time:"时间格式不正确",url:"地址格式不正确",required:"请填写该项",int:"请填写不为0的正整数"},ie={_rule:/^(.+?)\((.+)\)$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))$/,email:/^[a-zA-Z0-9]+([._\\-]*[a-zA-Z0-9])*@([a-zA-Z0-9]+[-a-zA-Z0-9]*[a-zA-Z0-9]+.){1,63}[a-zA-Z0-9]+$/,english:/^[A-Za-z]+$/,idCard:/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,int:/^[1-9][0-9]*$/,mobile:/^1[3-9]\d{9}$/,number:/^[0-9]+$/,qq:/^[1-9]\d{4,}$/,weChat:/^[-_a-zA-Z0-9]{4,24}$/,url:/[a-zA-z]+:\/\/[^\s]/,tel:/^(?:(?:0\d{2,3}[- ]?[1-9]\d{6,7})|(?:[48]00[- ]?[1-9]\d{6}))$/,time:/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,price:/^-?(([1-9]+\d*)|([1-9]\d*.\d{0,2})|(0.\d{0,2})|(0))$/,password:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,phone:/^((\+?[0-9]{1,4})|(\(\+86\)))?(13[0-9]|14[579]|15[0-3,5-9]|16[67]|17[0135678]|18[0-9]|19[189])\d{8}$/,passport:/^((E|K)[0-9]{8})|(((SE)|(DE)|(PE)|(MA))[0-9]{7})$/,ip:/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/,domain:/^[\w-_\u0391-\uFFE5]+$/},ae={is_or:function(e){var t=e.value,n=e.rule.value.split(","),i=!1;return""===t||(n.forEach(function(e){ie[e]&&ie[e].test(t)&&(i=!0)}),i)},is_email:function(e){var t=e.value;return!t||ie.email.test(t)},is_english:function(e){var t=e.value;return!t||ie.english.test(t)},is_chinese:function(e){var t=e.value;return!t||ie.chinese.test(t)},is_number:function(e){var t=e.value;return!t||ie.number.test(t)},is_idCard:function(e){var t=e.value;return!t||ie.idCard.test(t)},is_int:function(e){var t=e.value,n=e.field.element.validity;return(!n||!n.badInput)&&(!t||ie.int.test(t))},is_mobile:function(e){var t=e.value;return!t||ie.mobile.test(t)},is_price:function(e){var t=e.value;return!t||ie.price.test(t)},is_qq:function(e){var t=e.value;return!t||ie.qq.test(t)},is_weChat:function(e){var t=e.value;return!t||ie.weChat.test(t)},is_tel:function(e){var t=e.value;return!t||ie.tel.test(t)},is_time:function(e){var t=e.value;return!t||ie.time.test(t)},is_passport:function(e){var t=e.value;return!t||ie.passport.test(t)},is_url:function(e){var t=e.value;return!t||ie.url.test(t)},is_required:function(e){var t=e.value;return!(!t||""===t||void 0===t)},is_reg:function(e){var t=e.value,n=e.rule,i=new RegExp(n.value);return!t||i.test(t)},is_password:function(e){var t=e.value;return!t||ie.password.test(t)},is_not:function(e){return e.value!==e.rule.value},getCheckedCheckbox:function(e){var t=0;return[].slice.call(e).forEach(function(e){e.checked&&(t+=1)}),t},is_max:function(e){var t=e.value,n=e.rule,i=e.field,a=i.type,s=i.element,r=n.value;return"checkbox"===a?this.getCheckedCheckbox(s)<=r:!t||t.length<=r},is_min:function(e){var t=e.value,n=e.rule,i=e.field,a=i.type,s=i.element;return"checkbox"!==a?!t||t.length>=n.value:this.getCheckedCheckbox(s)>=n.value},is_phone:function(e){var t=e.value;return!t||ie.phone.test(t)},is_ip:function(e){var t=e.value;return!t||ie.ip.test(t)},is_domain:function(e){var t=e.value;return!t||ie.domain.test(t)},is_remote:function(e){var t=e.value,n=e.rule,i=e.field,s=e.form,a=n.value,r=a.split(","),o={},l="GET";if(1<r.length){a=r.shift();var c=!0;if(r.forEach(function(e){var t=_slicedToArray(e.replace(" ","").match(/^(\S*)\[(\S*)\]$/),3),n=(t[0],t[1]),i=t[2],a=s.querySelector('[name="'.concat(i,'"]')).value;o[n]=encodeURIComponent(a),a.length||(c=!1)}),!c)return!1}var u=a.charAt(a.length-1);if(0===a.indexOf("post:")&&(l="POST",a=a.slice(5)),t){var h=o;return"="===u?a+=t:h=Object.assign({},o,_defineProperty({},i.element.name,t)),"POST"===l&&window.jQuery?new Promise(function(t){window.jQuery.post(a,h,function(e){t(e)},"json")}):O.fetchData(a,h,l)}return!1},is_same:function(e){var t=e.value,n=e.rule;return t===te.querySelector('[name="'.concat(n.value,'"]')).value.trim()},is_diff:function(e){var t=e.value,n=e.rule,i=e.form.querySelector('[name="'.concat(n.value,'"]')).value.trim();return!i.length||t!==i},is_gt:function(e){var t=e.value,n=e.rule,i=te.querySelector('[name="'.concat(n.value,'"]'));return Number(t)>Number(i.value)},is_gte:function(e){var t=e.value,n=e.rule,i=te.querySelector('[name="'.concat(n.value,'"]'));return Number(t)>=Number(i.value)},is_gtnum:function(e){var t=e.value,n=e.rule;return""===t||Number(t)>Number(n.value)},is_gtenum:function(e){var t=e.value,n=e.rule;return""===t||Number(t)>=Number(n.value)},is_ltnum:function(e){var t=e.value,n=e.rule;return""===t||Number(t)<Number(n.value)},is_ltenum:function(e){var t=e.value,n=e.rule;return""===t||Number(t)<=Number(n.value)}},se=function(){function p(e,t,n,i,a){var s=this;_classCallCheck(this,p);var r=t,o=n,l=i,c=a;"function"==typeof t?(l=t,c=n,o=r=null):"function"==typeof n&&(l=n,c=i,r=null,o=t);var u=e;"string"==typeof e&&(u=te.querySelector(e)),u&&(this.settings=Object.assign({},{wrapSelector:".ui-control-wrap",validSelector:".v-item",errorClass:"error",successClass:"success",loadClass:"loading",tipElement:"span",tipClass:"v-error-tip",showClass:"show",separator:"|",realTime:!0,shouldFresh:!1,remoteLoading:!1,scrollToError:!1,fetchSuccess:function(e){return 200===e.code}},o),this.fields={},this.form=u,r&&this.addFields(r),this.settings.realTime&&this.delegateBlur(),this.delegateFocus(),this.form.addEventListener("submit",function(e){return e.preventDefault(),s.validAllFields(l,c),!1}))}return _createClass(p,[{key:"validAllFields",value:function(e,t){var n=this,i=this.settings,a=i.validSelector,s=i.shouldFresh,r=this,o=this.form.querySelectorAll(a),l=[];o&&(s&&(this.fields={}),this.initFields(o)),this.addResultToFields(),this.valid=!0,Object.keys(this.fields).every(function(e){var t=n.fields[e].valid;return l.push(e),t||(n.valid=!1),t}),this.checkValidResult(0,l,function(){r.validCallback(e,t)})}},{key:"addResultToFields",value:function(){var n=this,i=this.fields;Object.keys(i).forEach(function(e){var t=i[e];n.validField(t,"final")})}},{key:"checkValidResult",value:function(t,n,i){var e=this.fields,a=this.settings.fetchSuccess,s=this;if(t>=n.length)return s.valid=!0,void i();var r=e[n[t]];r.remote?r.remote.then(function(e){a(e)?s.checkValidResult(t+1,n,i):(s.valid=!1,i())}):r.valid?s.checkValidResult(t+1,n,i):(s.valid=!1,i())}},{key:"validCallback",value:function(e,t){var n,i,a=this.settings,s=a.tipClass,r=a.showClass,o=a.scrollToError,l=this.fields,c=this.form;this.valid?"function"==typeof e&&e(c,l):(!o||(n=te.querySelector("."+s+"."+r))&&(i=n.getBoundingClientRect().top-80+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),window.scrollTo(0,i)),"function"==typeof t&&t(c,l))}},{key:"addFields",value:function(e){for(var t=this.settings,n=t.validSelector,i=t.realTime,a=this.form,s=0,r=e.length;s<r;s+=1){var o=e[s],l=o.name,c=o.rules,u=o.msgs,h=a[l],d={element:h,name:l,type:0<h.length?h.type||h[0].type:h.type,rules:this.rulesToObject(c,u),tip:this.createErrorTip(h),value:null,checked:null,fn:o.fn||null};this.fields[l]=d,O.hasClass(h,n.replace(".",""))||i&&(this.addBlurEvent(d),this.addFocusEvent(d))}}},{key:"createErrorTip",value:function(e){var t,n=e.length&&0<e.length?e[0]:e,i=this.settings,a=i.tipElement,s=i.wrapSelector,r=i.tipClass,o=n.closest(s),l=n.id?" v-tip-".concat(n.id):"",c=n.getAttribute("data-tip");return c?t=this.form.querySelector(c):o.querySelector(".".concat(r))?t=o.querySelector(".".concat(r)):((t=te.createElement(a)).className="".concat(r).concat(l),o.appendChild(t))}},{key:"initFields",value:function(e){var n=this,i=[];[].slice.call(e).forEach(function(e){var t;e.name in n.fields||(t=n.addItem(e))&&i.push(t)}),this.addFields(i)}},{key:"addItem",value:function(e){var t=e.name,n=this.form[t],i=n;0<n.length&&p.isRadioOrCheckbox(n[0].type)&&(i=n[0]);var a=i.getAttribute("data-rules"),s=i.getAttribute("data-msgs")||"";return!(!t||!a)&&{name:t,rules:a,msgs:s}}},{key:"rulesToObject",value:function(e,t){var n=this.settings.separator,i=e.split(n),r={},o=t?t.split(n):"";return i.forEach(function(e,t){var n,i,a,s=e.match(ie._rule);s?(n=s[1],i=s[2]):n=e,a=o[t]||ne[n]||"error",r[n]={value:i,msg:a}}),r}},{key:"addBlurEvent",value:function(e){var t=this;p.isRadioOrCheckbox(e.type)||e.element.addEventListener("blur",function(){t.validField(e)})}},{key:"addFocusEvent",value:function(e){var t=this,n=e.element,i=e.tip,a=e.type;p.isRadioOrCheckbox(a)&&1<n.length?[].slice.call(n).forEach(function(e){return t.addFocus(e,i)}):this.addFocus(n,i)}},{key:"addFocus",value:function(e,t){var n=this;e.addEventListener("focus",function(){n.removeErrorClass(this,t)})}},{key:"delegateFocus",value:function(){var a=this,e=this.settings.validSelector,t=this.form;O.on(t,"focusin change",e,function(e){var t,n=e.target,i=n.name;i in a.fields&&(t=a.fields[i],a.removeErrorClass(n,t.tip))})}},{key:"delegateBlur",value:function(){var s=this;O.on(this.form,"focusout",this.settings.validSelector,function(e){var t,n,i,a;null!==s.fields&&((n=(t=e.target).name)in s.fields||(i=s.addItem(t),s.addFields([i])),a=s.fields[n],p.isRadioOrCheckbox(a.type)||s.validField(a))})}},{key:"removeErrorClass",value:function(e,t){var n=this.settings,i=n.showClass,a=n.errorClass,s=n.wrapSelector,r=n.successClass,o=t;O.removeClass(e,a),O.removeClass(t,i),o.innerText="",e.closest&&e.closest(s)&&(O.removeClass(e.closest(s),a),O.removeClass(e.closest(s),r))}},{key:"addLoadClass",value:function(e){var t=this.settings,n=t.loadClass,i=t.wrapSelector;O.addClass(e,n),e.closest&&e.closest(i)&&O.addClass(e.closest(i),n)}},{key:"removeLoadClass",value:function(e){var t=this.settings,n=t.loadClass,i=t.wrapSelector;O.removeClass(e,n),e.closest&&e.closest(i)&&O.removeClass(e.closest(i),n)}},{key:"validField",value:function(e,t){var a=this,s=1<arguments.length&&void 0!==t?t:"",r=e,o=this.form,n=this.settings,l=r.element,c=r.rules,u=r.tip,i=r.type,h=n.remoteLoading,d=n.fetchSuccess;r.checked=p.getAttrChecked(l,"checked"),r.value=p.isRadioOrCheckbox(i)?r.checked:l.value;var v=r.value;Object.keys(c).every(function(e){var t=c[e],n="string"==typeof v?v.trim():v;if("remote"===e&&"final"===s&&r.remote&&r.remoteOk)return!1;if(l.hasAttribute&&l.hasAttribute("disabled"))return r.valid=!0,r.validRule=void 0,!1;var i=ae["is_".concat(e)]({value:n,rule:t,key:e,field:r,form:o});if("boolean"==typeof i){if(!i)return a.showErrorTip(l,t.msg,u),r.valid=!1,r.validRule=t,a.removeSuccessTip(l),!1;a.showSuccessTip(l)}else if("remote"===e)return h&&a.addLoadClass(l),r.valid=!0,r.remote=i,r.remoteOk=!1,i.then(function(e){h&&a.removeLoadClass(l),d(e)?(r.valid=!0,r.validRule=void 0,a.showSuccessTip(l)):(r.valid=!1,r.validRule=t,a.showErrorTip(l,e.msg||t.msg,u)),r.remoteOk=!0}),!0;return r.valid=!0}),r.fn&&"function"==typeof r.fn&&r.fn(this,r)}},{key:"showErrorTip",value:function(e,t,n){var i,a,s=this.settings,r=s.errorClass,o=s.wrapSelector,l=s.tipClass,c=n,u=e;"string"==typeof e&&(u=this.form[e]),u&&(!n&&u.closest&&((c=(i=u.closest(o)).querySelector("."+l))||((a=document.createElement("div")).className=l,c=i.appendChild(a))),c.innerHTML=t,O.addClass(c,"show"),O.addClass(u,r),u.closest&&u.closest(o)&&O.addClass(u.closest(o),r))}},{key:"showSuccessTip",value:function(e){var t=this.settings,n=t.successClass,i=t.wrapSelector;e.closest&&e.closest(i)&&O.addClass(e.closest(i),n)}},{key:"removeSuccessTip",value:function(e){var t=this.settings,n=t.successClass,i=t.wrapSelector;e.closest&&e.closest(i)&&O.removeClass(e.closest(i),n)}},{key:"destroy",value:function(){this.form=null,this.fields=null}},{key:"cleanTip",value:function(e){var t,n=this.fields[e];n&&((t=n.element).length&&(t=n.element[0]),this.removeErrorClass(t,n.tip))}},{key:"cleanTips",value:function(e){var t=this,n=this.fields;e?this.cleanTip(e):Object.keys(n).forEach(function(e){t.cleanTip(e)})}}],[{key:"getAttrChecked",value:function(e,t){if(0<e.length&&p.isRadioOrCheckbox(e[0].type)){for(var n=0,i=e.length;n<i;n+=1)if(e[n].checked)return e[n][t];return!1}return e[t]}},{key:"isRadioOrCheckbox",value:function(e){return"radio"===e||"checkbox"===e}}]),p}();function re(e){return"object"===_typeof(e)&&null!==e}var oe={InternalError:"上传错误",InvalidFileExtensionError:"文件格式不正确",InvalidFileTypeError:"文件格式不正确",MaxFileSizeError:"文件过大",RequestError:"上传失败",UnsupportedError:"浏览器不支持此种上传",MultipleUnsupportedError:"不支持多文件上传"},le=function(){function o(e,t,n){var i=this;_classCallCheck(this,o);this.settings=Object.assign({},{files:null,limit:0,maxSize:0,data:{},fileType:[],fileName:"file",dataType:"json",maxUploads:1e3,chunkSize:0,beforeInit:null,init:null,start:function(){return!0},beforeUploadStart:null,beforeUpload:null,progress:null,success:null,error:null,cancel:null,complete:null,finish:null},n),this.uploads=[],this.uploadContexts=[],this._uploadData=[],this.queuedFilesCount=0,this.activeUploads=0,this.ajaxUrl=e,this.settings.beforeInit?this.settings.beforeInit(function(e){e&&i.create(t)}):this.create(t)}return _createClass(o,[{key:"create",value:function(e){var t,n,i,a,s=this,r=this.settings,o=r.files,l=r.fileName,c=e;(re(c)||o)&&(re(c)&&1<c.length&&(c=c[0]),t=c&&c.name,l&&(t=l),n=o||c.files,this.fileName=t,this.files=n,this.input=c,i=this.countFileNum(),0<(this.fileNum=i)?(this.initUploadContext(i,n,c),a=this.initRemaining(),(this.remaining=a).length?(this.queuedFilesCount=a.length,this.activeUploads=a.length,this.queueUpload(a),this.beforeUploadStart()):(this.uploadContexts.forEach(function(e,t){s.setUploadState(t,4)}),this.finish())):this.finish())}},{key:"countFileNum",value:function(){var e=this.files,t=this.input,n=this.settings.limit;return e&&e.length?n<=0?e.length:Math.min(n,e.length):t.value?1:0}},{key:"initUploadContext",value:function(e,i,a){var s=this.uploadContexts,r=this._uploadData;_toConsumableArray(Array(e)).forEach(function(e,n){var t=o.createId();r[n]={state:0,id:t,xhr:null},s[n]={index:n,id:t,state:"init",file:null!==i?i[n]:{name:a.value.split(/(\\|\/)/g).pop()},cancel:function(){var e=this.getUploadState(n);if(0===e)this.setUploadState(n,4);else{if(1!==e)return!1;this.setUploadState(n,4);var t=r[n];null!==t.xhr&&(t.xhr.abort(),t.xhr=null),this.cancel(n)}return!0}}})}},{key:"getUploadState",value:function(e){return this._uploadData[e].state}},{key:"setUploadState",value:function(e,t){this._uploadData[e].state=t,this.uploadContexts[e].state={0:"init",1:"uploading",2:"success",3:"error",4:"cancel"}[t]}},{key:"initRemaining",value:function(){for(var e=this.fileNum,t=[],n=0;n<e;n+=1)!1!==this.init(n)&&t.push(n);return t}},{key:"queueUpload",value:function(e){var t=this,n=[];e.forEach(function(e){t.validFile(e)&&t.start(e)&&n.push(e)}),n.length&&this.uploads.push(n)}},{key:"validateFileExtension",value:function(e){var t=this.settings.fileType,n=this.input;if(e&&e.name){var i=o.getFileExtension(e.name);return-1<t.lastIndexOf(i)}if(re(n)&&n.value){var a=o.getFileExtension(n.value);return-1<t.lastIndexOf(a)}return!0}},{key:"validFile",value:function(e){var t,n=this.input,i=this.files,a=this.settings,s=a.fileType,r=a.maxSize;if(1!==this.getUploadState(e))return!1;if(null!==i){if(!i[e])return this.error(e,"InternalError"),!1;t=i[e]}else if(!n.value)return this.error(e,"InternalError"),!1;return(!s.length||this.validateFileExtension(t))&&!(0<r&&!o.validateFileSize(r,t))||(this.error(e,"InvalidFileExtensionError"),!1)}},{key:"init",value:function(e){var t=this.settings.init;return!(0<this.getUploadState(e))&&(t&&!1===t.call(this.uploadContexts[e])?(this.setUploadState(e,4),!1):(this.setUploadState(e,1),!0))}},{key:"start",value:function(e){var t=this.settings.start;return!t||!1!==t.call(this.uploadContexts[e])||(this.setUploadState(e,4),!1)}},{key:"beforeUploadStart",value:function(){var t=this,e=this.settings.beforeUploadStart;e?e(this.uploadContexts,function(e){e&&t.uploadNext()}):this.uploadNext()}},{key:"uploadNext",value:function(){var e,n,t=this.settings,i=t.maxUploads,a=t.beforeUpload,s=t.data,r=t.chunkSize,o=this;this.uploads.length&&this.activeUploads<i&&(e=this.uploads[0],n=e.shift(),e.length||this.uploads.shift(),a?a.call(this.uploadContexts[n],n,function(e,t){e&&(r?o.dealChunk(n,t||s):o.uploadFile(n,t||s))}):r?o.dealChunk(n,s):o.uploadFile(n,s),this.uploads.length&&this.uploadNext())}},{key:"objectToFormData",value:function(i,a,s){var r=this;Object.keys(a).forEach(function(e){var t=a[e],n=s?"".concat(s,"[").concat(e,"]"):e;t?"object"===_typeof(t)?r.objectToFormData(i,t,n):i.append(n,t.toString()):i.append(n,"")})}},{key:"dealChunk",value:function(i,a){var s,r,o,l,c,u,h=this,e=this.settings.chunkSize,d=this.files[i],v=this;e&&(s=e,r=d.size,l=s,c=o=0,u=Math.ceil(r/s),function t(e){var n;o<r?(n=d.slice(o,l),h.fileXhr(n,a,{num:i,chunk:c,chunks:u},function(e){t(e)}),c+=1,l=(o=l)+s):(v._uploadData[i].xhr=null,v.progress(i,100),v.success(i,e))}())}},{key:"fileXhr",value:function(e,t,n,i){var a=n.chunk,s=n.chunks,r=n.num,o=new XMLHttpRequest,l=this,c=this.fileName,u=a/s*100,h=new FormData;t.chunk=a,t.chunks=s,this.objectToFormData(h,t),h.append(c,e),o.addEventListener("error",function(e){l._uploadData[r].xhr=null,l.error(r,{name:"RequestError",message:oe.RequestError,xhr:e})},!1),o.upload.addEventListener("progress",function(e){e.lengthComputable&&l.progress(r,u+e.loaded/e.total*100/s)},!1),o.addEventListener("load",function(){200===o.status&&i(o.responseText)},!1),o.open("POST",this.ajaxUrl,!0),o.send(h)}},{key:"uploadFile",value:function(t,e){var n,i,a,s,r,o;1===this.getUploadState(t)&&(n=this.files,i=this.fileName,a=this,null!==n?(s=n[t],r=new FormData,this.objectToFormData(r,e),r.append(i,s),(o=new XMLHttpRequest).addEventListener("error",function(e){a._uploadData[t].xhr=null,a.error(t,{name:"RequestError",message:oe.RequestError,xhr:e})},!1),o.upload.addEventListener("progress",function(e){e.lengthComputable&&a.progress(t,e.loaded/e.total*100)},!1),o.addEventListener("load",function(){200===o.status&&(a._uploadData[t].xhr=null,a.progress(t,100),a.success(t,o.responseText))},!1),o.open("POST",this.ajaxUrl,!0),o.send(r)):this.error(t,"InternalError"))}},{key:"progress",value:function(e,t){var n=this.settings.progress;1===this.getUploadState(e)&&n&&n.call(this.uploadContexts[e],t)}},{key:"success",value:function(e,t){var n=this.settings,i=n.success,a=n.dataType,s=t;if(1===this.getUploadState(e)&&this.setUploadState(e,2),i){if("json"===a)try{s=JSON.parse(t)}catch(e){throw new Error(e)}i.call(this.uploadContexts[e],s)}this.fileComplete(e,"success")}},{key:"error",value:function(e,t){var n=this.settings.error,i="string"==typeof t?{name:t,message:oe[t]}:t;1===this.getUploadState(e)&&(this.setUploadState(e,3),n&&n.call(this.uploadContexts[e],i),this.fileComplete(e,"error"))}},{key:"complete",value:function(e,t){var n=this.settings.complete;n&&n.call(this.uploadContexts[e],t)}},{key:"cancel",value:function(e){var t=this.settings.cancel;t&&t.call(this.uploadContexts[e]),this.fileComplete(e,"cancel")}},{key:"fileComplete",value:function(e,t){this.complete(e,t),--this.queuedFilesCount,0===this.queuedFilesCount&&this.finish(),--this.activeUploads}},{key:"finish",value:function(){var e=this.settings.finish;e&&e.call(this.uploadContexts)}}],[{key:"createId",value:function(){return"id"+Number(Math.random().toString().substr(3,3)+Date.now()).toString(36)}},{key:"getFileExtension",value:function(e){var t=e.lastIndexOf(".");return-1!==t?e.substr(t).toLowerCase():""}},{key:"validateFileSize",value:function(e,t){if(t){var n=t.size;if(n&&"number"==typeof n)return n<=e}return!0}}]),o}(),ce=function(){function n(e,t){_classCallCheck(this,n);this.settings=Object.assign({},{url:""},t),this.init(e)}return _createClass(n,[{key:"init",value:function(e){var t,n=e;"string"==typeof e&&(n=document.querySelector(e)),n&&((t=n.querySelector('input[type="file"]'))?(this.wrap=n,this.input=t,n.hasAttribute("data-drag")&&this.dragEvents(),t.hasAttribute("accept")&&(this.settings.fileType=t.getAttribute("accept").split(",")),O.hasClass(n,"ui-upload-img")&&this.singleUpload(),this.inputEvent()):console.warn("loose input"))}},{key:"singleUpload",value:function(){var e=this.wrap,t=e.querySelector(".trigger"),n=e.querySelector(".image"),i=e.querySelector(".upload-value"),a=this;O.on(e,"click",".js-clean",function(){O.removeClass(t,"hidden"),O.addClass(n,"hidden"),n.innerHTML="",a.input.value="",i&&(i.value="",i.trigger("focusout"))}),O.on(e,"click",".js-change",function(){a.input.click()})}},{key:"createSingleDom",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"file",i=this.wrap,a=i.querySelector(".trigger"),s=i.querySelector(".image"),r=i.querySelector(".upload-value"),o="";r?(r.value=e,r.trigger("change")):o='<input type="hidden" name="'.concat(n,'" value="').concat(e,'">'),o+='<img src="'.concat(e,'">\n    <div class="option">\n      <a href="javascript:;" class="js-change">替换</a><a href="javascript:;" class="js-clean">清除</a>\n    </div>'),s.innerHTML=o,O.removeClass(s,"hidden"),O.addClass(a,"hidden")}},{key:"inputEvent",value:function(){var e=this.input,t=this;e.addEventListener("change",function(){t.createUpload(this)})}},{key:"createUpload",value:function(e){var t=this.settings.url;new le(t,e,this.settings)}},{key:"dragEvents",value:function(){var e=this.wrap,n=this;e.addEventListener("dragenter",function(e){e.preventDefault(),e.stopPropagation(),O.addClass(this,"highlight")},!1),e.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation(),O.removeClass(this,"highlight")},!1),e.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),O.addClass(this,"highlight")},!1),e.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),O.removeClass(this,"highlight");var t=e.dataTransfer.files;n.createUpload(t)},!1)}}],[{key:"createProgress",value:function(e){var t=e.id,n=e.file,i=document.createElement("div");return i.id=t,i.className="file-item mt-12",i.innerHTML='<div class="ui-progress mb-8" style="width: 100%;">\n        <div class="bar" style="width: 0;"></div>\n      </div>\n      <div class="file-name ui-row">\n        <i class="iconfont icon-paperclip"></i>'.concat(n.name,'\n        <a href="javascript:;" class="cancel right ft-primary">取消</a>\n      </div>'),i}}]),n}();function ue(e,t){var n=[];if("string"!=typeof e)return"object"===_typeof(e)?e.length?(O.forEach(e,function(e){n.push(new ce(e,t))}),n):new ce(e,t):null;var i=document.querySelectorAll(e);return O.forEach(i,function(e){n.push(new ce(e,t))}),1<i.length?n:n[0]}ue.createProgress=ce.createProgress;var he=function(){function l(e,t){_classCallCheck(this,l);this.createPageButton=this.createPageButton.bind(this),this.settings=Object.assign({},{total:0,page:1,size:5,pages:5,limits:[10,20,30],prevIcon:"iconfont icon-arrow-left",nextIcon:"iconfont icon-arrow-right",pageClass:"ui-pagination",pageTotal:!0,pageInput:!0,pageSelect:!0,onChangeLimit:null,onChangePage:null},t),this.initPage(e)}return _createClass(l,[{key:"initPage",value:function(e){var t,n,i,a,s,r=e;"string"==typeof e&&(r=document.querySelector(e)),r&&(n=(t=this.settings).page,i=t.total,a=t.size,s=t.pages,this.pageWrapper=r,this.total=i,this.size=a,this.pages=s,this.changePageDom(n),this.events())}},{key:"changePage",value:function(e){var t=e.page,n=e.total,i=e.size,a=e.pages,s=this.settings,r=s.total,o=s.size,l=s.pages;this.total=void 0===n?r:n,this.size=void 0===i?o:i,this.pages=void 0===a?l:a,this.changePageBtn(t)}},{key:"createPageDom",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,i=this.total,a=this.settings,s=a.pageClass,r=a.pageTotal;this.page=e;var o=this.createPageArray().reduce(this.createPageButton,""),l=this.createPageNavDom("prev"),c=this.createPageNavDom("next"),u=this.createInputDom(),h=this.createSelectDom(),d=r?'<span class="ft-gray mr-24">共'.concat(i,"条</span>"):"";return n?d+l+o+c:'<div class="'.concat(s,'"><div class="ui-row middle pagination-box">')+d+l+o+c+"</div>"+h+u+"</div>"}},{key:"createPageArray",value:function(){var e=this.total,t=this.pages,n=this.size,i=Math.ceil(e/n),a=Math.ceil(t/2),s=Math.floor(t/2),r=l.createPageNumberArray,o=l.limitRange(1,i,this.page);return this.max=i,this.page=o,i<=t||o<=a?r(1,Math.min(i,t)):r(i-s<=o?i-t+1:o-s,t)}},{key:"createPageNavDom",value:function(e){var t=this.page,n=this.max,i=this.settings["".concat(e,"Icon")],a="prev"===e?t-1:t+1;return'<a href="javascript:;" class="page '.concat(a<=0||n<a?"disabled":"",'" data-page="').concat(a,'">\n        <i class="').concat(i,'"></i>\n      </a>')}},{key:"createPageButton",value:function(e,t){return t===this.page?e+'<span class="page active" data-page="'.concat(t,'">').concat(t,"</span>"):e+'<a href="javascript:;" class="page" data-page="'.concat(t,'">').concat(t,"</a>")}},{key:"createSelectDom",value:function(){var n=this,e=this.settings,t=e.pageSelect,i=e.limits;if(!t)return"";var a=i.reduce(function(e,t){return e+'<option value="'.concat(t,'" ').concat(t===n.size?"selected":"",">").concat(t,"条/页</option>")},"");return'<div class="ui-control-wrap">\n      <select class="ui-select ui-form-control page-select w94">\n        '.concat(a,"\n      </select>\n    </div>")}},{key:"createInputDom",value:function(){return this.settings.pageInput?'<span class="text">跳至</span>\n        <input class="ui-form-control page-input" type="number" name="page" autocomplete="off">\n      <span class="text">页</span>':""}},{key:"changePageDom",value:function(e){this.pageWrapper.innerHTML=this.createPageDom(e),new R(this.pageWrapper.querySelector(".page-select"))}},{key:"changePageBtn",value:function(e){this.pageWrapper.querySelector(".pagination-box").innerHTML=this.createPageDom(e,!0)}},{key:"handleChangePage",value:function(e){var t,n;O.hasClass(e,"disabled")||O.hasClass(e,"active")||(t=e.getAttribute("data-page"),n=Number(t),this.changePageNumber(n))}},{key:"changePageNumber",value:function(t){var n=this,e=this.settings.onChangePage;e&&"function"==typeof e?e(t,function(e){e&&n.changePageBtn(t)}):this.changePageBtn(t)}},{key:"handleInputPage",value:function(e){var t=l.limitRange(1,this.max,Number(e.value));this.changePageNumber(t)}},{key:"events",value:function(){var t=this,e=t.pageWrapper,n=this.settings.onChangeLimit;O.on(e,"click",".page",function(){t.handleChangePage(this)}),O.on(e,"keydown",".page-input",function(e){13===e.keyCode&&(e.preventDefault(),t.handleInputPage(this))}),O.on(e,"change",".page-select",function(){n&&n(Number(this.value))})}}],[{key:"limitRange",value:function(e,t,n){return n<e?e:t<n?t:n}},{key:"createPageNumberArray",value:function(n,e){return Array.from({length:e}).map(function(e,t){return t+n})}}]),l}(),de=function(){_inherits(u,he);var c=_createSuper(u);function u(e,t){_classCallCheck(this,u);var n=Object.assign({},{header:[],data:[],type:"ajax",fetchUrl:"",onChangePage:null,total:0,page:1,size:5,pages:5,tableClass:"ui-table",prevIcon:"iconfont icon-arrow-left",nextIcon:"iconfont icon-arrow-right",pageClass:"ui-pagination right",pageInput:!1},t),i=e;if("string"==typeof e&&(i=document.querySelector(e)),!i)return _possibleConstructorReturn(a);var a,s=O.createElement("div",{className:"ui-row mt-16"}),r=O.createElement("div",{className:"table-wrapper"}),o=i.appendChild(r),l=i.appendChild(s);return(a=c.call(this,l,n)).settings=n,a.pageWrapper=l,a.init(o),a}return _createClass(u,[{key:"init",value:function(e){var t=this.settings.data;this.wrapper=e,this.table=this.createTable(),this.thead=this.createTableHeader(),this.tbody=this.createTableTbody(),t.length&&this.updateList(t)}},{key:"createTable",value:function(){var e=O.createElement("table",{className:this.settings.tableClass});return this.wrapper.appendChild(e)}},{key:"createTableHeader",value:function(){var e,t=this.settings.header,n="";return Array.isArray(t)&&(n=t.reduce(function(e,t){var n=t,i=t.width||"";return"object"===_typeof(t)&&(n=t.name),e+'<th width="'.concat(i,'">').concat(n,"</th>")},"")),e=O.createElement("thead",{},n),this.table.appendChild(e)}},{key:"createTableTbody",value:function(){var e=O.createElement("tbody");return this.table.appendChild(e)}},{key:"createTableRow",value:function(a){var e=this.settings.header,s="";return"object"===_typeof(a)&&e.forEach(function(e){var t,n,i;"object"===_typeof(e)&&(t=e.name,n=e.template,i=a[t]||"",s+=n&&"function"==typeof n?n(a[t],a):"<td>".concat(i,"</td>"))}),"<tr>".concat(s,"</tr>")}},{key:"updateList",value:function(e){var n=this,t=e.reduce(function(e,t){return e+n.createTableRow(t)},"");this.tbody.innerHTML=t}},{key:"handleChangePage",value:function(e){var t,n,i=this,a=this.settings.onChangePage;O.hasClass(e,"disabled")||O.hasClass(e,"active")||(t=e.getAttribute("data-page"),n=Number(t),a&&"function"==typeof a?a(t,function(e){e&&i.changePageDom(n)}):this.changePageDom(n))}},{key:"events",value:function(){var e=this,t=e.pageWrapper;O.on(t,"click",".page",function(){e.handleChangePage(this)})}}]),u}(),ve=function(){function i(e,t){_classCallCheck(this,i);var n=Object.assign({},{navActive:"active",conActive:"show",navSelector:".tab-itm",conSelector:".tab-content",onChange:null},t);this.settings=n,this.init(e)}return _createClass(i,[{key:"init",value:function(e){var t=e;"string"==typeof e&&(t=document.querySelector(e)),t&&(this.wrapper=t,this.createIndex(),this.events())}},{key:"createIndex",value:function(){var e=this.wrapper,t=this.settings,n=t.navSelector,i=t.conSelector,a=e.querySelectorAll(n),s=e.querySelectorAll(i);this.navElements=a,this.contentElements=s,[].slice.call(a).forEach(function(e,t){e.setAttribute("data-index",t)})}},{key:"handleChangeTab",value:function(e){var t=this,n=this.settings,i=n.navActive,a=n.onChange,s=e.getAttribute("data-index"),r=Number(s);O.hasClass(e,i)||(a?a(r,function(){t.changeTab(e,r)}):this.changeTab(e,r))}},{key:"changeTab",value:function(e,n){var t=this.settings,i=this.navElements,a=this.contentElements,s=t.navActive,r=t.conActive;O.addClass(e,s),[].slice.call(i).forEach(function(e,t){t!==n&&O.removeClass(e,s)}),[].slice.call(a).forEach(function(e,t){t===n?O.addClass(e,r):O.removeClass(e,r)})}},{key:"events",value:function(){var e=this,t=e.wrapper,n=e.settings.navSelector;O.on(t,"click",n,function(){e.handleChangeTab(this)})}}]),i}();var pe,fe=function(){function a(e,t){_classCallCheck(this,a);var n=Object.assign({},{data:[],position:"right"},t);this.settings=n,this.init(e)}return _createClass(a,[{key:"init",value:function(e){var t=e;"string"==typeof t&&(t=document.querySelector(e)),t&&(this.anchor=t,this.isShow=!1,this.hideTimer=null,this.showTimer=null,this.events())}},{key:"createSvgElement",value:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=this.anchor.getBoundingClientRect(),n={x:0,y:0,width:t.width,height:t.height},i=this.menu.querySelector("ul").getBoundingClientRect(),a={x:n.width,y:0,width:i.width,height:i.height};return e.setAttribute("width",n.width),e.setAttribute("height",a.height),e.setAttribute("style","width: ".concat(n.width,"px;height: ").concat(a.height,"px;left: -").concat(n.width,"px")),e.innerHTML='<path fill="rgba(235,235,235,0)" d="M '.concat(n.x," ").concat(n.y,"\n    Q ").concat(a.x," ").concat(n.y,", ").concat(a.x," ").concat(a.y,"\n    v ").concat(a.height,"\n    Q ").concat(a.x," ").concat(n.y+n.height,", ").concat(n.x," ").concat(n.y+n.height,"\n    h ").concat(n.width,"\n    v -").concat(n.width,'\n    z"/>'),e}},{key:"createMenu",value:function(e){var t,n=this.settings.data,i=document.createElement("div");i.className="ui-anchor-menu",Array.isArray(n)&&n.length&&(t=n.reduce(function(e,t){return e+a.createMenuItem(t)},""),i.innerHTML='<ul class="ui-menu">'.concat(t,"</ul>")),i.style.left=e.left+e.width+"px",i.style.top=e.top+"px",this.menu=document.body.appendChild(i),this.svg=this.menu.appendChild(this.createSvgElement()),this.isShow=!0,this.menuEvents()}},{key:"show",value:function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height,a=t.left,s=t.top,r=O.getPageScrollTop(),o=O.getPageScrollLeft();this.createMenu({left:a+o,top:s+r,width:n,height:i})}},{key:"hide",value:function(){this.menu&&this.menu.remove()}},{key:"menuHandler",value:function(){var e=this;clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){e.menu.removeEventListener("mouseleave",e.menuHandler),e.menu.removeEventListener("mouseenter",e.menuEnterHandler),e.menu.remove(),e.isShow=!1},200)}},{key:"menuEnterHandler",value:function(){clearTimeout(this.hideTimer)}},{key:"menuEvents",value:function(){var e=this.menu;e.addEventListener("mouseleave",this.menuHandler),e.addEventListener("mouseenter",this.menuEnterHandler)}},{key:"events",value:function(){var e=this,t=this.anchor;this.menuHandler=this.menuHandler.bind(this),this.menuEnterHandler=this.menuEnterHandler.bind(this),t.addEventListener("mouseenter",function(){clearTimeout(e.hideTimer),e.isShow||e.show(this)}),t.addEventListener("mouseleave",function(){e.menuHandler()})}}],[{key:"createMenuItem",value:function(e){var t=e.title,n=e.icon,i=e.href,a='<i class="iconfont icon-'.concat(n,'"></i>'),s=t;return i?'<li class="menu-item"><a href="'.concat(i,'">').concat(a).concat(s,"</a></li>"):'<li class="menu-item">'.concat(a).concat(s,"</li>")}}]),a}(),me=function(){_inherits(p,$);var a=_createSuper(p);function p(e,t){_classCallCheck(this,p),pe=window.tinycolor;var n,i=Object.assign({},{swatches:["#000000","#595959","#BFBFBF","#f5f5f5","#F5242D","#FA541C","#FA8C17","#FADB13","#52C41A","#13C2C2","#1790FF","#2F54EB","#722ED1","#EB2F96","#2A86C5","#2E5089"],onChange:null,gap:0,position:"right bottom"},t);return(n=a.call(this,i)).settings=i,pe&&n.init(e),n}return _createClass(p,[{key:"init",value:function(e){var t=e;"string"==typeof e&&(t=document.querySelector(e)),this.input=t;var n=p.createDom(),i=document.body.appendChild(n);this.panel=i,this.cacheVariable()}},{key:"cacheVariable",value:function(){var e=this.panel;this.spectrumCanvas=e.querySelector(".spectrum-canvas"),this.spectrumCursor=e.querySelector(".spectrum-cursor"),this.spectrumCtx=this.spectrumCanvas.getContext("2d"),this.hueCanvas=e.querySelector(".hue-canvas"),this.hueCursor=e.querySelector(".hue-cursor"),this.hueCtx=this.hueCanvas.getContext("2d"),this.panelColor=e.querySelector(".panel-color"),this.hex=e.querySelector(".hex"),this.spectrumRect=null,this.hueRect=null,this.currentColor="",this.hue=0,this.saturation=1,this.lightness=.5,this.initSwatch(),this.initHueSpectrum(),this.createShadeSpectrum(),this.events()}},{key:"initSwatch",value:function(){var e=this.settings,n=this.panel.querySelector(".default-swatches"),i=this;e.swatches.forEach(function(e){var t=document.createElement("button");t.className="swatch",t.style.backgroundColor=e,t.addEventListener("click",function(){i.changeColor(this.style.backgroundColor)}),n.appendChild(t)})}},{key:"initHueSpectrum",value:function(){var t=this,e=t.hueCanvas,n=t.hueCtx,i=e.height,a=e.width,s=n.createLinearGradient(a,0,0,0);s.addColorStop(0,"hsl(0,100%,50%)"),s.addColorStop(.17,"hsl(298.8, 100%, 50%)"),s.addColorStop(.33,"hsl(241.2, 100%, 50%)"),s.addColorStop(.5,"hsl(180, 100%, 50%)"),s.addColorStop(.67,"hsl(118.8, 100%, 50%)"),s.addColorStop(.83,"hsl(61.2,100%,50%)"),s.addColorStop(1,"hsl(360,100%,50%)"),n.fillStyle=s,n.fillRect(0,0,a,i),e.addEventListener("mousedown",function(e){t.startGetHueColor(e)})}},{key:"changeColor",value:function(e){var t=pe(e);this.colorToPos(t),this.setColorValues(t)}},{key:"refreshElementRects",value:function(){this.spectrumRect=this.spectrumCanvas.getBoundingClientRect(),this.hueRect=this.hueCanvas.getBoundingClientRect()}},{key:"setColorValues",value:function(e){var t=pe(e).toHex();this.hex.value=t}},{key:"colorToPos",value:function(e){var t=this.hueRect,n=this.spectrumRect,i=n.width,a=n.height,s=pe(e),r=s.toHsv(),o=s.toHsl(),l=i*r.s,c=a*(1-r.v),u=r.h,h=u/360*t.width;this.hue=u,this.lightness=o.l,this.saturation=o.s,this.updateSpectrumCursor(l,c),this.updateHueCursor(h),this.setCurrentColor(s),this.createShadeSpectrum(p.colorToHue(u))}},{key:"updateSpectrumCursor",value:function(e,t){var n=this.spectrumCursor.style;n.left=e+"px",n.top=t+"px"}},{key:"updateHueCursor",value:function(e){this.hueCursor.style.left=e+"px"}},{key:"setCurrentColor",value:function(e){var t=pe(e);this.currentColor=t,this.spectrumCursor.style.backgroundColor=t,this.panelColor.style.backgroundColor=t}},{key:"createShadeSpectrum",value:function(e){var t=this.spectrumCanvas,n=this.spectrumCtx,i=t.height,a=t.width,s=e;n.clearRect(0,0,a,i),s=s||"#f00",n.fillStyle=s,n.fillRect(0,0,a,i);var r=n.createLinearGradient(0,0,a,0);r.addColorStop(0,"#fff"),r.addColorStop(1,"rgba(255,255,255,0)"),n.fillStyle=r,n.fillRect(0,0,a,i);var o=n.createLinearGradient(0,0,0,i);o.addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"#000"),n.fillStyle=o,n.fillRect(0,0,a,i)}},{key:"startGetSpectrumColor",value:function(e){this.getSpectrumColor(e),O.addClass(this.spectrumCursor,"dragging"),this.isDrag=!0}},{key:"endGetSpectrumColor",value:function(){O.removeClass(this.spectrumCursor,"dragging"),this.isDrag=!1}},{key:"startGetHueColor",value:function(e){this.getHueColor(e),O.addClass(this.hueCursor,"dragging"),this.hueDrag=!0}},{key:"endGetHueColor",value:function(){O.removeClass(this.hueCursor,"dragging"),this.hueDrag=!1}},{key:"getHueColor",value:function(e){var t,n,i,a,s,r,o,l,c;this.hueDrag&&(e.preventDefault(),t=this.saturation,n=this.lightness,a=(i=this.hueRect).left,s=i.width,o=360*((r=p.limitRange(0,s,e.clientX-a))/s),this.hue=o,l=p.colorToHue(o),c=pe("hsl ".concat(o," ").concat(t," ").concat(n)).toHslString(),this.createShadeSpectrum(l),this.updateHueCursor(r),this.setCurrentColor(c),this.setColorValues(c))}},{key:"getSpectrumColor",value:function(e,t){var n,i,a,s,r,o,l,c,u,h,d,v;(this.isDrag||t)&&(e.preventDefault(),i=(n=this.spectrumRect).width,a=n.height,s=n.left,r=n.top,o=e.clientX-s,l=e.clientY-r,o=p.limitRange(0,i,o),c=1-(l=p.limitRange(.1,a,l))/a,u=o/i,d=(h=pe("hsv ".concat(this.hue," ").concat(u," ").concat(c))).toRgbString(),v=h.toHsl(),this.lightness=v.l,this.saturation=v.s,this.setCurrentColor(d),this.setColorValues(d),this.updateSpectrumCursor(o,l))}},{key:"show",value:function(e){var t=this.panel,n="";e.getAttribute("value")&&(n=e.getAttribute("value")),e.getAttribute("data-color")&&(n=e.getAttribute("data-color")),this.setPosition(t,e),this.refreshElementRects(),n&&this.changeColor(n),O.addClass(this.panel,"show")}},{key:"hide",value:function(){O.removeClass(this.panel,"show")}},{key:"confirm",value:function(){var e=this.settings.onChange,t=this.currentColor.toHex();e&&"function"==typeof e&&e(t),this.hide()}},{key:"events",value:function(){var t=this,e=t.hex,n=t.input,i=t.spectrumCanvas,a=t.panel;e.addEventListener("change",function(){t.colorToPos(this.value)}),window.addEventListener("resize",function(){t.refreshElementRects()}),window.addEventListener("scroll",function(){t.refreshElementRects()}),window.addEventListener("mousemove",this.getSpectrumColor.bind(this)),window.addEventListener("mouseup",this.endGetSpectrumColor.bind(this)),window.addEventListener("mousemove",this.getHueColor.bind(this)),window.addEventListener("mouseup",this.endGetHueColor.bind(this)),i.addEventListener("click",function(e){t.getSpectrumColor(e,"click")}),i.addEventListener("mousedown",function(e){t.startGetSpectrumColor(e)}),n&&n.addEventListener("click",function(e){e.stopPropagation(),t.show(this)}),a.querySelector(".color-confirm").addEventListener("click",function(){t.confirm()}),a.addEventListener("click",function(e){e.stopPropagation()}),window.addEventListener("click",function(){t.hide()})}}],[{key:"createDom",value:function(){var e=document.createElement("div");return e.className="ui-color-picker",e.innerHTML='<div class="color-picker-panel">\n      <div class="spectrum-map">\n        <a href="javascript:;" class="spectrum-cursor color-cursor"></a>\n        <canvas class="spectrum-canvas"></canvas>\n      </div>\n      <div class="panel-row panel-color-row">\n        <div class="panel-color"></div>\n        <div class="panel-bar">\n          <div class="hue-map">\n            <a href="javascript:;" class="hue-cursor color-cursor"></a>\n            <canvas class="hue-canvas"></canvas>\n          </div>\n          <div class="panel-input">\n          <label>#</label>\n          <input type="text" class="hex field-input" maxlength="6"/>\n          <button class="field-button color-confirm">确定</button>\n        </div>\n        </div>\n      </div>\n      <div class="panel-row">\n        <div class="swatches-title">预制</div>\n        <div class="swatches default-swatches"></div>\n      </div>\n    </div>',e}},{key:"colorToHue",value:function(e){return pe("hsl "+e+" 1 .5").toHslString()}},{key:"limitRange",value:function(e,t,n){return n<e?e:t<n?t:n}}]),p}(),ge=function(){function i(e,t){_classCallCheck(this,i);var n=Object.assign({},{padding:24,data:[],check:!0,callback:null},t);this.settings=n,this.init(e)}return _createClass(i,[{key:"init",value:function(e){var t,n,i,a=e;"string"==typeof e&&(a=document.querySelector(e)),a&&(n=(t=this.settings).data,i=t.callback,this.wrap=a,this.wrap.innerHTML=this.createTreeDom(n),i&&"function"==typeof i&&i())}},{key:"createTreeDom",value:function(e,t){var i=this,a=1<arguments.length&&void 0!==t?t:0,s="";return e.forEach(function(e){var t,n;e.children?(t=i.createTreeDom(e.children,a+1),n=i.createLabel(e,a),s+='<div class="tree-group">'.concat(n).concat(t,"</div>")):s+=i.createNode(e,a)}),s}},{key:"createLabel",value:function(e,t){var n=this.settings.padding,i=e.id,a=e.name;return'<div class="node-label node-trigger expend" style="padding-left: '.concat(t*n,'px">\n    <label class="ui-checkbox"><input type="checkbox" class="check-all" value="').concat(i,'"><i class="iconfont"></i><span>').concat(a,"</span></label>\n  </div>")}},{key:"createNode",value:function(e,t){var n=this.settings.padding,i=e.id,a=e.name;return'<div class="tree-node">\n    <div class="node-label" style="padding-left: '.concat(n*(t+1),'px">\n      <label class="ui-checkbox"><input type="checkbox" value="').concat(i,'"><i class="iconfont"></i><span>').concat(a,"</span></label>\n    </div>\n  </div>")}}]),i}(),ye=function(){function a(e,t){_classCallCheck(this,a);this.settings=Object.assign({},{selector:".lightbox"},t);var n=document.querySelector(e);this.init(n)}return _createClass(a,[{key:"init",value:function(e){this.wrapper=e;var t=a.createTemplate(),n=O.createElement("div",{className:"ui-lightbox"},t),i=document.body.appendChild(n);this.box=i,this.img=i.querySelector(".lb-con"),this.prev=i.querySelector(".lb-prev"),this.next=i.querySelector(".lb-next"),this.loading=i.querySelector(".lb-loading"),this.bindEvent()}},{key:"changeImage",value:function(e){var t,n,i=this;"number"==typeof e&&(t=this.imageArray[e]),"string"==typeof e&&(t=e),t&&(this.showLoading(),this.img.innerHTML='<img src="'.concat(t,'" alt="" class="lb-img">'),(n=new Image).src=t,n.onload=function(){i.hideLoading()})}},{key:"showLoading",value:function(){this.loading.classList.add("show")}},{key:"hideLoading",value:function(){this.loading.classList.remove("show")}},{key:"showBox",value:function(e){var t=e.getAttribute("data-src");this.changeImage(t),this.box.classList.add("show"),this.initGroup(e)}},{key:"initGroup",value:function(e){var t=this.settings.selector,n=this.wrapper.querySelectorAll(t),i=[].slice.call(n).map(function(e){return e.getAttribute("data-src")});this.currentIndex=[].indexOf.call(n,e),this.imageArray=i,this.max=i.length,this.toggleNav()}},{key:"toggleNav",value:function(){this.currentIndex>=this.max-1?this.next.classList.add("hide"):this.next.classList.remove("hide"),0===this.currentIndex?this.prev.classList.add("hide"):this.prev.classList.remove("hide")}},{key:"hideBox",value:function(){this.box.classList.remove("show")}},{key:"showPrev",value:function(){--this.currentIndex,this.changeImage(this.currentIndex),this.toggleNav()}},{key:"showNext",value:function(){this.currentIndex+=1,this.changeImage(this.currentIndex),this.toggleNav()}},{key:"bindEvent",value:function(){var e=this.settings.selector,t=this;O.on(this.wrapper,"click",e,function(){t.showBox(this)}),O.on(this.box,"click",".lb-close",function(){t.hideBox()}),O.on(this.box,"click",".lb-prev",function(){t.showPrev()}),O.on(this.box,"click",".lb-next",function(){t.showNext()})}}],[{key:"createTemplate",value:function(){return'<div class="lb-close">&times;</div>\n      <div class="lb-main">\n        <div class="lb-con">\n          <img src="" alt="" class="lb-img">\n        </div>\n        <div class="lb-loading"></div>\n        <a href="javascript:;" class="lb-prev"><i class="iconfont icon-arrow-left"></i></a>\n        <a href="javascript:;" class="lb-next"><i class="iconfont icon-arrow-right"></i></a>\n      </div>'}}]),a}(),be={util:O,Select:R,Cascader:B,Autocomplete:V,CheckAll:N,Modal:z,Message:W,Tooltip:X,InputCount:I,Tag:ee,Validator:se,Upload:le,Popper:Z,Toast:Q,Layer:J,UploadHelper:ue,Transfer:j,Position:$,InputNumber:D,Pagination:he,Table:de,Tab:function(e,t){if("string"!=typeof e)return"object"===_typeof(e)&&null!==e?e.length?[].slice.call(e).map(function(e){return new ve(e,t)}):new ve(e,t):null;var n=document.querySelectorAll(e);return[].slice.call(n).map(function(e){return new ve(e,t)})},Menu:fe,Range:P,SectionRange:q,ColorPicker:me,Tree:ge,Lightbox:ye,Scroll:function(){function i(e,t){_classCallCheck(this,i);this.settings=Object.assign({},{duration:2e3,speed:.3},t),this.init(e)}return _createClass(i,[{key:"init",value:function(e){var t,n=e;"string"==typeof e&&(n=document.querySelector(e)),n&&(t=n.children[0],this.rowHeight=i.getRowHeight(t),this.fullHeight=n.offsetHeight,this.parent=n.parentNode,this.cloneElement=this.createCloneNode(n),this.parent.style.transition="transform ".concat(this.settings.speed,"s"),this.top=0,this.scroll(),this.events())}},{key:"createCloneNode",value:function(e){var t=this.rowHeight,n=this.parent.parentNode.clientHeight,i=Math.ceil(n/t),a=e.cloneNode(),s=new Range;s.selectNodeContents(e);for(var r=s.cloneContents(),o=document.createDocumentFragment(),l=i-1;0<=l;--l)o.insertBefore(r.children[l],o.children[0]);return a.appendChild(o),a.classList.add("ele--copy"),e.parentNode.appendChild(a)}},{key:"scroll",value:function(){var t=this,n=this.rowHeight,i=this.fullHeight,a=this.parent,e=this.settings,s=e.duration,r=e.speed;this.timer=setInterval(function(){t.top+=n;var e=t.top;e===n&&(a.style.transition="transform ".concat(r,"s")),a.style.transform="translateY(-".concat(e,"px)"),i<=e&&(t.top=0)},s)}},{key:"events",value:function(){var e=this,t=this.parent;t.addEventListener("transitionend",function(){0===e.top&&(t.style.transition="none",t.style.transform="translateY(0)")}),t.addEventListener("mouseenter",function(){clearInterval(e.timer)}),t.addEventListener("mouseleave",function(){e.scroll()})}},{key:"destroy",value:function(){clearInterval(this.timer),this.parent=null}}],[{key:"getRowHeight",value:function(e){var t=e.offsetHeight,n=window.getComputedStyle(e);return t+parseFloat(n.marginTop)+parseFloat(n.marginBottom)}}]),i}()};window.ui=be,O.on(document,"click","[data-closeable]",function(e){O.hasClass(e.target,"icon-times")&&this.parentNode.removeChild(this)}),O.on(document,"click",".node-trigger",function(){O.toggleClass(this,"expend")}),O.supportPseudo(":focus-within")||(O.on(document,"focusin",".ui-icon-input input",function(){O.addClass(this.closest(".ui-icon-input"),"active")}),O.on(document,"focusout",".ui-icon-input input",function(){O.removeClass(this.closest(".ui-icon-input"),"active")})),window.addEventListener("load",function(){document.body.addEventListener("click",function(){var e=document.querySelectorAll(".ui-pika");O.forEach(e,function(e){e.hide()})})})});